(()=>{var t={7501:function(t,e,n){var s;t=n.nmd(t),function(r){var i=e,o=(t&&t.exports,"object"==typeof n.g&&n.g);o.global!==o&&o.window;var c=function(t){this.message=t};(c.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new c(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,h={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,s,r,i=t.length%3,o="",c=-1,l=t.length-i;++c<l;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,s=t.charCodeAt(++c),o+=u.charAt((r=e+n+s)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==i?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),o+=u.charAt((r=e+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==i&&(r=t.charCodeAt(c),o+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),o},decode:function(t){var e=(t=String(t).replace(l,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,s,r=0,i="",o=-1;++o<e;)s=u.indexOf(t.charAt(o)),n=r%4?64*n+s:s,r++%4&&(i+=String.fromCharCode(255&n>>(-2*r&6)));return i},version:"0.1.0"};void 0===(s=function(){return h}.call(e,n,e,t))||(t.exports=s)}()},6658:(t,e,n)=>{"use strict";var s=n(3090),r=s.decodeBitsToIds,i=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var e=i(t),n=e.version,s=e.cmpId,o=e.vendorListVersion,c=e.purposeIdBitString,a=e.maxVendorId,u=e.created,l=e.lastUpdated,h=e.isRange,d=e.defaultConsent,f=e.vendorIdBitString,p=e.vendorRangeList,m=e.cmpVersion,g=e.consentScreen,_=e.consentLanguage,w={version:n,cmpId:s,vendorListVersion:o,allowedPurposeIds:r(c),maxVendorId:a,created:u,lastUpdated:l,cmpVersion:m,consentScreen:g,consentLanguage:_};if(h){var v=p.reduce((function(t,e){for(var n=e.isRange,s=e.startVendorId,r=e.endVendorId,i=n?r:s,o=s;o<=i;o+=1)t[o]=!0;return t}),{});w.allowedVendorIds=[];for(var y=1;y<=a;y+=1)(d&&!v[y]||!d&&v[y])&&-1===w.allowedVendorIds.indexOf(y)&&w.allowedVendorIds.push(y)}else w.allowedVendorIds=r(f);return w}}},8462:(t,e,n)=>{"use strict";var s=n(6658).decodeConsentString;t.exports={decodeConsentString:s}},3090:(t,e,n)=>{"use strict";var s=n(7501),r=n(3977),i=r.versionNumBits,o=r.vendorVersionMap;function c(t,e,n){return parseInt(t.substr(e,n),2)}function a(t,e,n){return new Date(100*c(t,e,n))}function u(t){var e=c(t);return String.fromCharCode(e+65).toLowerCase()}function l(t,e,n){var s=t.substr(e,n);return u(s.slice(0,n/2))+u(s.slice(n/2))}function h(t){var e=t.input,n=t.output,s=t.startPosition,r=t.field,i=r.type,o=r.numBits,u=r.decoder,h=r.validator,f=r.listCount;if("function"==typeof h&&!h(n))return{newPosition:s};if("function"==typeof u)return u(e,n,s);var p,m,g="function"==typeof o?o(n):o;switch(i){case"int":return{fieldValue:c(e,s,g)};case"bool":return{fieldValue:(p=e,m=s,1===parseInt(p.substr(m,1),2))};case"date":return{fieldValue:a(e,s,g)};case"bits":return{fieldValue:e.substr(s,g)};case"list":return function(t,e,n,s,r){var i=0;"function"==typeof r?i=r(e):"number"==typeof r&&(i=r);for(var o=n,c=[],a=0;a<i;a+=1){var u=d({input:t,fields:s.fields,startPosition:o});o=u.newPosition,c.push(u.decodedObject)}return{fieldValue:c,newPosition:o}}(e,n,s,r,f);case"language":return{fieldValue:l(e,s,g)};default:throw new Error("ConsentString - Unknown field type "+i+" for decoding")}}function d(t){var e=t.input,n=t.fields,s=t.startPosition,r=void 0===s?0:s;return{decodedObject:n.reduce((function(t,n){var s=n.name,i=n.numBits,o=h({input:e,output:t,startPosition:r,field:n}),c=o.fieldValue,a=o.newPosition;return void 0!==c&&(t[s]=c),void 0!==a?r=a:"number"==typeof i&&(r+=i),t}),{}),newPosition:r}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,e,n){return"1"===e&&-1===t.indexOf(n+1)&&t.push(n+1),t}),[])},decodeFromBase64:function(t,e){for(var n=t;n.length%4!=0;)n+="=";n=n.replace(/-/g,"+").replace(/_/g,"/");for(var r,a,u=s.decode(n),l="",h=0;h<u.length;h+=1){var f=u.charCodeAt(h).toString(2);l+=(r=f,a=8-f.length,function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="",s=0;s<t;s+=1)n+=e;return n}(Math.max(0,a))+r)}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=c(t,0,i);if("number"!=typeof n)throw new Error("ConsentString - Unknown version number in the string to decode");if(!o[n])throw new Error("ConsentString - Unsupported version "+n+" in the string to decode");return d({input:t,fields:e[n].fields}).decodedObject}(l,e)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=new WeakMap;function e(e,n){return t.get(e)&&t.get(e).get(n)}function s(t,n,s){if(void 0===n)throw new TypeError;const r=e(n,s);return r&&r.get(t)}function r(n,s,r,i){if(i&&!["string","symbol"].includes(typeof i))throw new TypeError;(e(r,i)||function(e,n){const s=t.get(e)||new Map;t.set(e,s);const r=s.get(n)||new Map;return s.set(n,r),r}(r,i)).set(n,s)}function i(t,e,n){return s(t,e,n)?s(t,e,n):Object.getPrototypeOf(e)?i(t,Object.getPrototypeOf(e),n):void 0}const o={decorate:function(t,e,n,s){if(!Array.isArray(t)||0===t.length)throw new TypeError;return void 0!==n?function(t,e,n,s){return t.reverse().forEach((t=>{s=t(e,n,s)||s})),s}(t,e,n,s):"function"==typeof e?function(t,e){return t.reverse().forEach((t=>{const n=t(e);n&&(e=n)})),e}(t,e):void 0},defineMetadata:function(t,e,n,s){r(t,e,n,s)},getMetadata:function(t,e,n){return i(t,e,n)},getOwnMetadata:function(t,e,n){return s(t,e,n)},hasMetadata:function(t,e,n){return!!i(t,e,n)},hasOwnMetadata:function(t,e,n){return!!s(t,e,n)},metadata:function(t,e){return function(n,s){r(t,e,n,s)}}};function c(t,e){if(!t)throw new Error(e)}globalThis.identity_Reflect||(globalThis.identity_Reflect={}),Object.assign(identity_Reflect,o);const a=34028234663852886e22,u=-34028234663852886e22,l=4294967295,h=2147483647,d=-2147483648;function f(t){if("number"!=typeof t)throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>h||t<d)throw new Error("invalid int 32: "+t)}function p(t){if("number"!=typeof t)throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>l||t<0)throw new Error("invalid uint 32: "+t)}function m(t){if("number"!=typeof t)throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>a||t<u))throw new Error("invalid float 32: "+t)}const g=Symbol("@bufbuild/protobuf/enum-type");function _(t){const e=t[g];return c(e,"missing enum type on enum object"),e}function w(t,e,n,s){t[g]=v(e,n.map((e=>({no:e.no,name:e.name,localName:t[e.no]}))),s)}function v(t,e,n){const s=Object.create(null),r=Object.create(null),i=[];for(const t of e){const e=b(t);i.push(e),s[t.name]=e,r[t.no]=e}return{typeName:t,values:i,findName:t=>s[t],findNumber:t=>r[t]}}function y(t,e,n){const s={};for(const t of e){const e=b(t);s[e.localName]=e.no,s[e.no]=e.localName}return w(s,t,e,n),s}function b(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class S{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const n=this.getType().runtime.bin,s=n.makeReadOptions(e);return n.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,e){const n=this.getType(),s=n.runtime.json,r=s.makeReadOptions(e);return s.readMessage(n,t,r,this),this}fromJsonString(t,e){let n;try{n=JSON.parse(t)}catch(t){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${t instanceof Error?t.message:String(t)}`)}return this.fromJson(n,e)}toBinary(t){const e=this.getType().runtime.bin,n=e.makeWriteOptions(t),s=n.writerFactory();return e.writeMessage(this,s,n),s.finish()}toJson(t){const e=this.getType().runtime.json,n=e.makeWriteOptions(t);return e.writeMessage(this,n)}toJsonString(t){var e;const n=this.toJson(t);return JSON.stringify(n,null,null!==(e=null==t?void 0:t.prettySpaces)&&void 0!==e?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}var C,A;function E(){let t=0,e=0;for(let n=0;n<28;n+=7){let s=this.buf[this.pos++];if(t|=(127&s)<<n,0==(128&s))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(15&n)<<28,e=(112&n)>>4,0==(128&n))return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let s=this.buf[this.pos++];if(e|=(127&s)<<n,0==(128&s))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function I(t,e,n){for(let s=0;s<28;s+=7){const r=t>>>s,i=!(r>>>7==0&&0==e),o=255&(i?128|r:r);if(n.push(o),!i)return}const s=t>>>28&15|(7&e)<<4,r=!(e>>3==0);if(n.push(255&(r?128|s:s)),r){for(let t=3;t<31;t+=7){const s=e>>>t,r=!(s>>>7==0),i=255&(r?128|s:s);if(n.push(i),!r)return}n.push(e>>>31&1)}}!function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"}(C||(C={})),function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"}(A||(A={}));const x=4294967296;function k(t){const e="-"===t[0];e&&(t=t.slice(1));const n=1e6;let s=0,r=0;function i(e,i){const o=Number(t.slice(e,i));r*=n,s=s*n+o,s>=x&&(r+=s/x|0,s%=x)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),e?$(s,r):T(s,r)}function P(t,e){if(({lo:t,hi:e}=function(t,e){return{lo:t>>>0,hi:e>>>0}}(t,e)),e<=2097151)return String(x*e+t);const n=16777215&(t>>>24|e<<8),s=e>>16&65535;let r=(16777215&t)+6777216*n+6710656*s,i=n+8147497*s,o=2*s;const c=1e7;return r>=c&&(i+=Math.floor(r/c),r%=c),i>=c&&(o+=Math.floor(i/c),i%=c),o.toString()+N(i)+N(r)}function T(t,e){return{lo:0|t,hi:0|e}}function $(t,e){return e=~e,t?t=1+~t:e+=1,T(t,e)}const N=t=>{const e=String(t);return"0000000".slice(e.length)+e};function O(t,e){if(t>=0){for(;t>127;)e.push(127&t|128),t>>>=7;e.push(t)}else{for(let n=0;n<9;n++)e.push(127&t|128),t>>=7;e.push(1)}}function L(){let t=this.buf[this.pos++],e=127&t;if(0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<7,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<14,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<21,0==(128&t))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(15&t)<<28;for(let e=5;0!=(128&t)&&e<10;e++)t=this.buf[this.pos++];if(0!=(128&t))throw new Error("invalid varint");return this.assertBounds(),e>>>0}const U=function(){const t=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof t.getBigInt64&&"function"==typeof t.getBigUint64&&"function"==typeof t.setBigInt64&&"function"==typeof t.setBigUint64&&("object"!=typeof process||"1"!=={DG_IDENTITY:void 0,DISABLE_EXTRA_SESSION_LOGS:!0}.BUF_BIGINT_DISABLE)){const e=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),s=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(t){const s="bigint"==typeof t?t:BigInt(t);if(s>n||s<e)throw new Error(`int64 invalid: ${t}`);return s},uParse(t){const e="bigint"==typeof t?t:BigInt(t);if(e>r||e<s)throw new Error(`uint64 invalid: ${t}`);return e},enc(e){return t.setBigInt64(0,this.parse(e),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(e){return t.setBigInt64(0,this.uParse(e),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec:(e,n)=>(t.setInt32(0,e,!0),t.setInt32(4,n,!0),t.getBigInt64(0,!0)),uDec:(e,n)=>(t.setInt32(0,e,!0),t.setInt32(4,n,!0),t.getBigUint64(0,!0))}}const e=t=>c(/^-?[0-9]+$/.test(t),`int64 invalid: ${t}`),n=t=>c(/^[0-9]+$/.test(t),`uint64 invalid: ${t}`);return{zero:"0",supported:!1,parse:t=>("string"!=typeof t&&(t=t.toString()),e(t),t),uParse:t=>("string"!=typeof t&&(t=t.toString()),n(t),t),enc:t=>("string"!=typeof t&&(t=t.toString()),e(t),k(t)),uEnc:t=>("string"!=typeof t&&(t=t.toString()),n(t),k(t)),dec:(t,e)=>function(t,e){let n=T(t,e);const s=2147483648&n.hi;s&&(n=$(n.lo,n.hi));const r=P(n.lo,n.hi);return s?"-"+r:r}(t,e),uDec:(t,e)=>P(t,e)}}();var R;!function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"}(R||(R={}));class D{constructor(t){this.stack=[],this.textEncoder=null!=t?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let e=0;e<this.chunks.length;e++)t+=this.chunks[e].length;let e=new Uint8Array(t),n=0;for(let t=0;t<this.chunks.length;t++)e.set(this.chunks[t],n),n+=this.chunks[t].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(p(t);t>127;)this.buf.push(127&t|128),t>>>=7;return this.buf.push(t),this}int32(t){return f(t),O(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){m(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){p(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){f(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return f(t),O(t=(t<<1^t>>31)>>>0,this.buf),this}sfixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),s=U.enc(t);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),s=U.uEnc(t);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(e)}int64(t){let e=U.enc(t);return I(e.lo,e.hi,this.buf),this}sint64(t){let e=U.enc(t),n=e.hi>>31;return I(e.lo<<1^n,(e.hi<<1|e.lo>>>31)^n,this.buf),this}uint64(t){let e=U.uEnc(t);return I(e.lo,e.hi,this.buf),this}}class V{constructor(t,e){this.varint64=E,this.uint32=L,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=null!=e?e:new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,n=7&t;if(e<=0||n<0||n>5)throw new Error("illegal tag: field no "+e+" wire type "+n);return[e,n]}skip(t){let e=this.pos;switch(t){case R.Varint:for(;128&this.buf[this.pos++];);break;case R.Bit64:this.pos+=4;case R.Bit32:this.pos+=4;break;case R.LengthDelimited:let e=this.uint32();this.pos+=e;break;case R.StartGroup:let n;for(;(n=this.tag()[1])!==R.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(e,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let t=this.uint32();return t>>>1^-(1&t)}int64(){return U.dec(...this.varint64())}uint64(){return U.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),n=-(1&t);return t=(t>>>1|(1&e)<<31)^n,e=e>>>1^n,U.dec(t,e)}bool(){let[t,e]=this.varint64();return 0!==t||0!==e}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return U.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return U.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function j(t,e){return e instanceof S||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}C.DOUBLE,C.FLOAT,C.INT64,C.UINT64,C.INT32,C.UINT32,C.BOOL,C.STRING,C.BYTES;function M(t,e,n){if(e===n)return!0;if(t==C.BYTES){if(!(e instanceof Uint8Array&&n instanceof Uint8Array))return!1;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}switch(t){case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return e==n}return!1}function F(t,e){switch(t){case C.BOOL:return!1;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return 0==e?U.zero:"0";case C.DOUBLE:case C.FLOAT:return 0;case C.BYTES:return new Uint8Array(0);case C.STRING:return"";default:return 0}}function B(t,e){const n=void 0===e;let s=R.Varint,r=0===e;switch(t){case C.STRING:r=n||!e.length,s=R.LengthDelimited;break;case C.BOOL:r=!1===e;break;case C.DOUBLE:s=R.Bit64;break;case C.FLOAT:s=R.Bit32;break;case C.INT64:case C.UINT64:r=n||0==e;break;case C.FIXED64:r=n||0==e,s=R.Bit64;break;case C.BYTES:r=n||!e.byteLength,s=R.LengthDelimited;break;case C.FIXED32:case C.SFIXED32:s=R.Bit32;break;case C.SFIXED64:r=n||0==e,s=R.Bit64;break;case C.SINT64:r=n||0==e}return[s,C[t].toLowerCase(),n||r]}const G=Symbol("@bufbuild/protobuf/unknown-fields"),J={readUnknownFields:!0,readerFactory:t=>new V(t)},q={writeUnknownFields:!0,writerFactory:()=>new D};function H(t){return t?Object.assign(Object.assign({},J),t):J}function W(t){return t?Object.assign(Object.assign({},q),t):q}function Y(t,e,n,s){const r=e.getType().runtime.bin,i=null==s?void 0:s.delimited;return r.readMessage(e,t,i?null==s?void 0:s.no:t.uint32(),n,i),e}function X(t,e,n){const s=e.uint32(),r=e.pos+s;let i,o;for(;e.pos<r;){let[s]=e.tag();switch(s){case 1:i=K(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=K(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=Y(e,new t.V.T,n,void 0)}}}if(void 0===i){let e=F(t.K,A.BIGINT);i=t.K==C.BOOL?e.toString():e}if("string"!=typeof i&&"number"!=typeof i&&(i=i.toString()),void 0===o)switch(t.V.kind){case"scalar":o=F(t.V.T,A.BIGINT);break;case"enum":o=0;break;case"message":o=new t.V.T}return[i,o]}function z(t,e){const n=K(t,e);return"bigint"==typeof n?n.toString():n}function K(t,e){switch(e){case C.STRING:return t.string();case C.BOOL:return t.bool();case C.DOUBLE:return t.double();case C.FLOAT:return t.float();case C.INT32:return t.int32();case C.INT64:return t.int64();case C.UINT64:return t.uint64();case C.FIXED64:return t.fixed64();case C.BYTES:return t.bytes();case C.FIXED32:return t.fixed32();case C.SFIXED32:return t.sfixed32();case C.SFIXED64:return t.sfixed64();case C.SINT64:return t.sint64();case C.UINT32:return t.uint32();case C.SINT32:return t.sint32()}}function Q(t,e,n,s,r){t.tag(n.no,R.LengthDelimited),t.fork();let i=s;switch(n.K){case C.INT32:case C.FIXED32:case C.UINT32:case C.SFIXED32:case C.SINT32:i=Number.parseInt(s);break;case C.BOOL:c("true"==s||"false"==s),i="true"==s}switch(tt(t,n.K,1,i,!0),n.V.kind){case"scalar":tt(t,n.V.T,2,r,!0);break;case"enum":tt(t,C.INT32,2,r,!0);break;case"message":t.tag(2,R.LengthDelimited).bytes(r.toBinary(e))}t.join()}function Z(t,e,n,s){if(void 0!==s){const r=j(n.T,s);(null==n?void 0:n.delimited)?t.tag(n.no,R.StartGroup).raw(r.toBinary(e)).tag(n.no,R.EndGroup):t.tag(n.no,R.LengthDelimited).bytes(r.toBinary(e))}}function tt(t,e,n,s,r){let[i,o,c]=B(e,s);c&&!r||t.tag(n,i)[o](s)}function et(t,e,n,s){if(!s.length)return;t.tag(n,R.LengthDelimited).fork();let[,r]=B(e);for(let e=0;e<s.length;e++)t[r](s[e]);t.join()}let nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),st=[];for(let t=0;t<nt.length;t++)st[nt[t].charCodeAt(0)]=t;st["-".charCodeAt(0)]=nt.indexOf("+"),st["_".charCodeAt(0)]=nt.indexOf("/");const rt={dec(t){let e=3*t.length/4;"="==t[t.length-2]?e-=2:"="==t[t.length-1]&&(e-=1);let n,s=new Uint8Array(e),r=0,i=0,o=0;for(let e=0;e<t.length;e++){if(n=st[t.charCodeAt(e)],void 0===n)switch(t[e]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=n,i=1;break;case 1:s[r++]=o<<2|(48&n)>>4,o=n,i=2;break;case 2:s[r++]=(15&o)<<4|(60&n)>>2,o=n,i=3;break;case 3:s[r++]=(3&o)<<6|n,i=0}}if(1==i)throw Error("invalid base64 string.");return s.subarray(0,r)},enc(t){let e,n="",s=0,r=0;for(let i=0;i<t.length;i++)switch(e=t[i],s){case 0:n+=nt[e>>2],r=(3&e)<<4,s=1;break;case 1:n+=nt[r|e>>4],r=(15&e)<<2,s=2;break;case 2:n+=nt[r|e>>6],n+=nt[63&e],s=0}return s&&(n+=nt[r],n+="=",1==s&&(n+="=")),n}},it={ignoreUnknownFields:!1},ot={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ct(t){return t?Object.assign(Object.assign({},it),t):it}function at(t){return t?Object.assign(Object.assign({},ot),t):ot}function ut(t){if(null===t)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function lt(t,e,n){switch(t){case C.DOUBLE:case C.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e)break;if("string"==typeof e&&e.trim().length!==e.length)break;if("string"!=typeof e&&"number"!=typeof e)break;const s=Number(e);if(Number.isNaN(s))break;if(!Number.isFinite(s))break;return t==C.FLOAT&&m(s),s;case C.INT32:case C.FIXED32:case C.SFIXED32:case C.SINT32:case C.UINT32:if(null===e)return 0;let r;if("number"==typeof e?r=e:"string"==typeof e&&e.length>0&&e.trim().length===e.length&&(r=Number(e)),void 0===r)break;return t==C.UINT32?p(r):f(r),r;case C.INT64:case C.SFIXED64:case C.SINT64:if(null===e)return U.zero;if("number"!=typeof e&&"string"!=typeof e)break;const i=U.parse(e);return n?i.toString():i;case C.FIXED64:case C.UINT64:if(null===e)return U.zero;if("number"!=typeof e&&"string"!=typeof e)break;const o=U.uParse(e);return n?o.toString():o;case C.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case C.STRING:if(null===e)return"";if("string"!=typeof e)break;try{encodeURIComponent(e)}catch(t){throw new Error("invalid UTF8")}return e;case C.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return rt.dec(e)}throw new Error}function ht(t,e,n){if(null===e)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=t.findName(e);if(s||n)return null==s?void 0:s.no}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${ut(e)}`)}function dt(t,e,n,s){var r;if(void 0===e)return e;if(0===e&&!n)return;if(s)return e;if("google.protobuf.NullValue"==t.typeName)return null;const i=t.findNumber(e);return null!==(r=null==i?void 0:i.name)&&void 0!==r?r:e}function ft(t,e,n){if(void 0!==e)switch(t){case C.INT32:case C.SFIXED32:case C.SINT32:case C.FIXED32:case C.UINT32:return c("number"==typeof e),0!=e||n?e:void 0;case C.FLOAT:case C.DOUBLE:return c("number"==typeof e),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":0!==e||n?e:void 0;case C.STRING:return c("string"==typeof e),e.length>0||n?e:void 0;case C.BOOL:return c("boolean"==typeof e),e||n?e:void 0;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return c("bigint"==typeof e||"string"==typeof e||"number"==typeof e),n||0!=e?e.toString(10):void 0;case C.BYTES:return c(e instanceof Uint8Array),n||e.byteLength>0?rt.enc(e):void 0}}function pt(t){if(void 0===t)return t;if(t instanceof S)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function mt(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class gt{constructor(t,e){this.t=t,this.i=e}findJsonName(t){if(!this.jsonNames){const t={};for(const e of this.list())t[e.jsonName]=t[e.name]=e;this.jsonNames=t}return this.jsonNames[t]}find(t){if(!this.numbers){const t={};for(const e of this.list())t[e.no]=e;this.numbers=t}return this.numbers[t]}list(){return this.all||(this.all=this.i(this.t)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((t,e)=>t.no-e.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const n of this.list())n.oneof?n.oneof!==e&&(e=n.oneof,t.push(e)):t.push(n)}return this.members}}function _t(t,e){const n=yt(t);return e?n:Et(At(n))}function wt(t){return _t(t,!1)}const vt=yt;function yt(t){let e=!1;const n=[];for(let s=0;s<t.length;s++){let r=t.charAt(s);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]);const bt=new Set(["constructor","toString","toJSON","valueOf"]),St=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Ct=t=>`${t}$`,At=t=>St.has(t)?Ct(t):t,Et=t=>bt.has(t)?Ct(t):t;class It{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=wt(t)}addField(t){c(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this.o){this.o=Object.create(null);for(let t=0;t<this.fields.length;t++)this.o[this.fields[t].localName]=this.fields[t]}return this.o[t]}}const xt=(kt="proto3",Pt=function(t){const e=t(dt,ft);return{makeReadOptions:ct,makeWriteOptions:at,readMessage(t,e,n,s){if(null==e||Array.isArray(e)||"object"!=typeof e)throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(e)}`);s=null!=s?s:new t;const r={};for(const[i,o]of Object.entries(e)){const e=t.fields.findJsonName(i);if(!e){if(!n.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${i}" is unknown`);continue}let c=e.localName,a=s;if(e.oneof){if(null===o&&"scalar"==e.kind)continue;const n=r[e.oneof.localName];if(n)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${e.oneof.name}" present: "${n}", "${i}"`);r[e.oneof.localName]=i,a=a[e.oneof.localName]={case:c},c="value"}if(e.repeated){if(null===o)continue;if(!Array.isArray(o))throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`);const s=a[c];for(const r of o){if(null===r)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(r)}`);let i;switch(e.kind){case"message":i=e.T.fromJson(r,n);break;case"enum":if(i=ht(e.T,r,n.ignoreUnknownFields),void 0===i)continue;break;case"scalar":try{i=lt(e.T,r,e.L)}catch(n){let s=`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(r)}`;throw n instanceof Error&&n.message.length>0&&(s+=`: ${n.message}`),new Error(s)}}s.push(i)}}else if("map"==e.kind){if(null===o)continue;if(Array.isArray(o)||"object"!=typeof o)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`);const s=a[c];for(const[r,i]of Object.entries(o)){if(null===i)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: map value null`);let c;switch(e.V.kind){case"message":c=e.V.T.fromJson(i,n);break;case"enum":if(c=ht(e.V.T,i,n.ignoreUnknownFields),void 0===c)continue;break;case"scalar":try{c=lt(e.V.T,i,A.BIGINT)}catch(n){let s=`cannot decode map value for field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(s+=`: ${n.message}`),new Error(s)}}try{s[lt(e.K,e.K==C.BOOL?"true"==r||"false"!=r&&r:r,A.BIGINT).toString()]=c}catch(n){let s=`cannot decode map key for field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(s+=`: ${n.message}`),new Error(s)}}}else switch(e.kind){case"message":const s=e.T;if(null===o&&"google.protobuf.Value"!=s.typeName){if(e.oneof)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: null is invalid for oneof field "${i}"`);continue}a[c]instanceof S?a[c].fromJson(o,n):(a[c]=s.fromJson(o,n),s.fieldWrapper&&!e.oneof&&(a[c]=s.fieldWrapper.unwrapField(a[c])));break;case"enum":const r=ht(e.T,o,n.ignoreUnknownFields);void 0!==r&&(a[c]=r);break;case"scalar":try{a[c]=lt(e.T,o,e.L)}catch(n){let s=`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw n instanceof Error&&n.message.length>0&&(s+=`: ${n.message}`),new Error(s)}}}return s},writeMessage(t,n){const s=t.getType(),r={};let i;try{for(const o of s.fields.byMember()){let s;if("oneof"==o.kind){const r=t[o.localName];if(void 0===r.value)continue;if(i=o.findField(r.case),!i)throw"oneof case not found: "+r.case;s=e(i,r.value,n)}else i=o,s=e(i,t[i.localName],n);void 0!==s&&(r[n.useProtoFieldName?i.name:i.jsonName]=s)}}catch(t){const e=i?`cannot encode field ${s.typeName}.${i.name} to JSON`:`cannot encode message ${s.typeName} to JSON`,n=t instanceof Error?t.message:String(t);throw new Error(e+(n.length>0?`: ${n}`:""))}return r},readScalar:lt,writeScalar:ft,debug:ut}}(((t,e)=>function(n,s,r){if("map"==n.kind){const i={};switch(n.V.kind){case"scalar":for(const[t,r]of Object.entries(s)){const s=e(n.V.T,r,!0);c(void 0!==s),i[t.toString()]=s}break;case"message":for(const[t,e]of Object.entries(s))i[t.toString()]=e.toJson(r);break;case"enum":const o=n.V.T;for(const[e,n]of Object.entries(s)){c(void 0===n||"number"==typeof n);const s=t(o,n,!0,r.enumAsInteger);c(void 0!==s),i[e.toString()]=s}}return r.emitDefaultValues||Object.keys(i).length>0?i:void 0}if(n.repeated){const i=[];switch(n.kind){case"scalar":for(let t=0;t<s.length;t++)i.push(e(n.T,s[t],!0));break;case"enum":for(let e=0;e<s.length;e++)i.push(t(n.T,s[e],!0,r.enumAsInteger));break;case"message":for(let t=0;t<s.length;t++)i.push(j(n.T,s[t]).toJson(r))}return r.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return e(n.T,s,!!n.oneof||n.opt||r.emitDefaultValues);case"enum":return t(n.T,s,!!n.oneof||n.opt||r.emitDefaultValues,r.enumAsInteger);case"message":return void 0!==s?j(n.T,s).toJson(r):void 0}})),Tt=Object.assign(Object.assign({},{makeReadOptions:H,makeWriteOptions:W,listUnknownFields(t){var e;return null!==(e=t[G])&&void 0!==e?e:[]},discardUnknownFields(t){delete t[G]},writeUnknownFields(t,e){const n=t[G];if(n)for(const t of n)e.tag(t.no,t.wireType).raw(t.data)},onUnknownField(t,e,n,s){const r=t;Array.isArray(r[G])||(r[G]=[]),r[G].push({no:e,wireType:n,data:s})},readMessage(t,e,n,s,r){const i=t.getType(),o=r?e.len:e.pos+n;let c,a;for(;e.pos<o&&([c,a]=e.tag(),a!=R.EndGroup);){const n=i.fields.find(c);if(!n){const n=e.skip(a);s.readUnknownFields&&this.onUnknownField(t,c,a,n);continue}let r=t,o=n.repeated,u=n.localName;switch(n.oneof&&(r=r[n.oneof.localName],r.case!=u&&delete r.value,r.case=u,u="value"),n.kind){case"scalar":case"enum":const t="enum"==n.kind?C.INT32:n.T;let i=K;if("scalar"==n.kind&&n.L>0&&(i=z),o){let n=r[u];if(a==R.LengthDelimited&&t!=C.STRING&&t!=C.BYTES){let s=e.uint32()+e.pos;for(;e.pos<s;)n.push(i(e,t))}else n.push(i(e,t))}else r[u]=i(e,t);break;case"message":const c=n.T;o?r[u].push(Y(e,new c,s,n)):r[u]instanceof S?Y(e,r[u],s,n):(r[u]=Y(e,new c,s,n),!c.fieldWrapper||n.oneof||n.repeated||(r[u]=c.fieldWrapper.unwrapField(r[u])));break;case"map":let[l,h]=X(n,e,s);r[u][l]=h}}if(r&&(a!=R.EndGroup||c!==n))throw new Error("invalid end group tag")}}),{writeMessage(t,e,n){const s=t.getType();for(const r of s.fields.byNumber()){let s,i=r.repeated,o=r.localName;if(r.oneof){const e=t[r.oneof.localName];if(e.case!==o)continue;s=e.value}else s=t[o];switch(r.kind){case"scalar":case"enum":let t="enum"==r.kind?C.INT32:r.T;if(i)if(r.packed)et(e,t,r.no,s);else for(const n of s)tt(e,t,r.no,n,!0);else void 0!==s&&tt(e,t,r.no,s,!!r.oneof||r.opt);break;case"message":if(i)for(const t of s)Z(e,n,r,t);else Z(e,n,r,s);break;case"map":for(const[t,i]of Object.entries(s))Q(e,n,r,t,i)}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}}),$t=Object.assign(Object.assign({},{setEnumType:w,initPartial(t,e){if(void 0===t)return;const n=e.getType();for(const s of n.fields.byMember()){const n=s.localName,r=e,i=t;if(void 0!==i[n])switch(s.kind){case"oneof":const t=i[n].case;if(void 0===t)continue;const e=s.findField(t);let o=i[n].value;!e||"message"!=e.kind||o instanceof e.T?e&&"scalar"===e.kind&&e.T===C.BYTES&&(o=mt(o)):o=new e.T(o),r[n]={case:t,value:o};break;case"scalar":case"enum":let c=i[n];s.T===C.BYTES&&(c=s.repeated?c.map(mt):mt(c)),r[n]=c;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===C.BYTES)for(const[t,e]of Object.entries(i[n]))r[n][t]=mt(e);else Object.assign(r[n],i[n]);break;case"message":const t=s.V.T;for(const e of Object.keys(i[n])){let s=i[n][e];t.fieldWrapper||(s=new t(s)),r[n][e]=s}}break;case"message":const a=s.T;if(s.repeated)r[n]=i[n].map((t=>t instanceof a?t:new a(t)));else if(void 0!==i[n]){const t=i[n];a.fieldWrapper?"google.protobuf.BytesValue"===a.typeName?r[n]=mt(t):r[n]=t:r[n]=t instanceof a?t:new a(t)}}}},equals:(t,e,n)=>e===n||!(!e||!n)&&t.fields.byMember().every((t=>{const s=e[t.localName],r=n[t.localName];if(t.repeated){if(s.length!==r.length)return!1;switch(t.kind){case"message":return s.every(((e,n)=>t.T.equals(e,r[n])));case"scalar":return s.every(((e,n)=>M(t.T,e,r[n])));case"enum":return s.every(((t,e)=>M(C.INT32,t,r[e])))}throw new Error(`repeated cannot contain ${t.kind}`)}switch(t.kind){case"message":return t.T.equals(s,r);case"enum":return M(C.INT32,s,r);case"scalar":return M(t.T,s,r);case"oneof":if(s.case!==r.case)return!1;const e=t.findField(s.case);if(void 0===e)return!0;switch(e.kind){case"message":return e.T.equals(s.value,r.value);case"enum":return M(C.INT32,s.value,r.value);case"scalar":return M(e.T,s.value,r.value)}throw new Error(`oneof cannot contain ${e.kind}`);case"map":const n=Object.keys(s).concat(Object.keys(r));switch(t.V.kind){case"message":const e=t.V.T;return n.every((t=>e.equals(s[t],r[t])));case"enum":return n.every((t=>M(C.INT32,s[t],r[t])));case"scalar":const i=t.V.T;return n.every((t=>M(i,s[t],r[t])))}}})),clone(t){const e=t.getType(),n=new e,s=n;for(const n of e.fields.byMember()){const e=t[n.localName];let r;if(n.repeated)r=e.map(pt);else if("map"==n.kind){r=s[n.localName];for(const[t,n]of Object.entries(e))r[t]=pt(n)}else r="oneof"==n.kind?n.findField(e.case)?{case:e.case,value:pt(e.value)}:{case:void 0}:pt(e);s[n.localName]=r}return n}}),{newFieldList:t=>new gt(t,Nt),initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,s=t;if(e.repeated)s[n]=[];else switch(e.kind){case"oneof":s[n]={case:void 0};break;case"enum":s[n]=0;break;case"map":s[n]={};break;case"scalar":s[n]=F(e.T,e.L)}}}}),{syntax:kt,json:Pt,bin:Tt,util:$t,makeMessageType(t,e,n){return function(t,e,n,s){var r;const i=null!==(r=null==s?void 0:s.localName)&&void 0!==r?r:e.substring(e.lastIndexOf(".")+1),o={[i]:function(e){t.util.initFields(this),t.util.initPartial(e,this)}}[i];return Object.setPrototypeOf(o.prototype,new S),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary:(t,e)=>(new o).fromBinary(t,e),fromJson:(t,e)=>(new o).fromJson(t,e),fromJsonString:(t,e)=>(new o).fromJsonString(t,e),equals:(e,n)=>t.util.equals(o,e,n)}),o}(this,t,e,n)},makeEnum:y,makeEnumType:v,getEnumType:_});var kt,Pt,Tt,$t;function Nt(t){var e,n,s,r;const i=[];let o;for(const c of"function"==typeof t?t():t){const t=c;if(t.localName=_t(c.name,void 0!==c.oneof),t.jsonName=null!==(e=c.jsonName)&&void 0!==e?e:vt(c.name),t.repeated=null!==(n=c.repeated)&&void 0!==n&&n,"scalar"==c.kind&&(t.L=null!==(s=c.L)&&void 0!==s?s:A.BIGINT),void 0!==c.oneof){const e="string"==typeof c.oneof?c.oneof:c.oneof.name;o&&o.name==e||(o=new It(e)),t.oneof=o,o.addField(t)}"message"==c.kind&&(t.delimited=!1),t.packed=null!==(r=c.packed)&&void 0!==r?r:"enum"==c.kind||"scalar"==c.kind&&c.T!=C.BYTES&&c.T!=C.STRING,i.push(t)}return i}const Ot=xt.makeEnum("contracts.core.v1.ImplementationType",[{no:0,name:"WEB"},{no:1,name:"AMP"},{no:2,name:"BOTH"},{no:3,name:"IN_APP_WEB"},{no:4,name:"IN_APP_NATIVE"},{no:5,name:"STANDALONE"},{no:6,name:"IDENTITY_SCRIPT"}]),Lt=xt.makeEnum("contracts.core.v1.PublisherExclusionLevel",[{no:0,name:"EXCLUSION_LEVEL_UNSPECIFIED"},{no:1,name:"DATA_SHARING_AND_PROFILING"},{no:2,name:"DATA_SHARING_PROFILING_AND_ADDRESABILITY"}]),Ut=xt.makeEnum("contracts.core.v1.UseUserScore",[{no:0,name:"NO"},{no:1,name:"YES"}]),Rt=xt.makeEnum("contracts.core.v1.CookieIdOrigin",[{no:0,name:"ORIGIN_UNSPECIFIED"},{no:1,name:"THIRD_PARTY_COOKIE"},{no:2,name:"LOCAL_STORAGE"},{no:3,name:"NEW_USER"}]),Dt=xt.makeEnum("contracts.tracking.common.v1.SaxEventType",[{no:0,name:"EVENT_TYPE_UNSPECIFIED"},{no:1,name:"HBA_VIDEO"},{no:2,name:"ORTB"},{no:3,name:"TAG"},{no:4,name:"SDK"},{no:5,name:"HBA_BANNER"}]),Vt={l:"Emergency",u:"Alert",h:"Critical",m:"Error",_:"Warn",p:"Info"};function jt(t){const e={topFrame:t,topChildFrame:null,error:!1};try{for(;e.topFrame.parent?.document!==e.topFrame.document;){if(!e.topFrame.parent?.document){e.error=!0;break}e.topChildFrame=e.topFrame,e.topFrame=e.topFrame.parent}}catch(t){e.error=!0}return e}function Mt(t,e){let n="";if(!t.error)try{n=t.topFrame.location.href}catch(t){}if(!n||0===n.length)try{e.top&&(n=e.top.location.href)}catch(t){}if(!n||0===n.length)try{n=t.topFrame.document.referrer}catch(t){}return n}function Ft(t){return"object"==typeof t&&null!==t&&"stack"in t&&"message"in t||t instanceof Error}function Bt(t){return"string"==typeof t}function Gt(t){return Bt(t)&&t.length>0}function Jt(t){return Ft(t)?t:Gt(t)?new Error(t):new Error(String(t))}const qt=!0,Ht=JSON.parse('{"version":2064555287,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production","debugMode":false}'),Wt={I:"cnxStoryId",k:"cnxLineItemId",S:"cnxPlayerId",P:"cnxMediaId",C:"cnxPlaylistId",A:"cnxVideoPosition",N:"cnxExplorationMode",O:"cnxStoryPosition",R:"cnxSkipAdsFlag",D:"cnxReloadTime",U:"cnxOverrideLineitems",$:"cnxIsSeoTraffic",M:"cust_params",F:"cnxDebug",G:"cnxEnableNewUi",j:"cnxStgStorage",B:"cnxDebugLogs",q:"cnxFeatureFlags",H:"cnxClientAb0",J:"cnxClientAb1",Y:"cnxClientAb2",W:"cnxClientAb3",X:"cnxClientAb4",Z:"cnxClientAb5",ee:"cnxServerAb0",te:"cnxServerAb1",ne:"cnxServerAb2",ie:"cnxServerAb3",re:"cnxServerAb4",se:"cnxServerAb5",oe:"cnxHlsDebug",ae:"cnxLLCallPercent",ce:"cnxDebugStats",le:"cnxEnv",ue:"connatixDummy",de:"cnxPreloadLitUI",he:"cnxPreloadFloating",me:"cnxShowAdCard",_e:"cnxEnableRum"};class Yt{constructor(){}}Yt.sessionId="",Yt.playerDestroyed=!1,Yt.pe=1e3,Yt.fe={},Yt.ge={},Yt.ve={},Yt.incrementLogCount=t=>{Yt.ge[t]?(++Yt.fe[t],++Yt.ge[t]):(Yt.ge[t]=1,Yt.fe[t]=1)},Yt.isMaxLog=(t,e)=>!!(Yt.ge[t]&&Yt.ge[t]>e),Yt.isMaxLogOverflow=t=>Yt.fe[t]>Yt.pe&&(Yt.fe[t]=1,!0),Yt.setMaxLogSent=t=>{Yt.ve[t]=!0},Yt.isMaxLogSent=t=>!!Yt.ve[t];const Xt="connatix.com",zt="thecontentserver.com";class Kt{constructor(t){const{Te:e,ye:n,we:s}=t,{Ie:r}=s,{Ie:i,be:o,Ee:c}=e,{Ie:a,be:u,ke:l}=n;this.we={Se:{...s},Pe:{we:`${r}core/identity`,Ce:`${r}core/sync`,Ae:`${r}core/us`}},this.Te={Se:{...e},Pe:{Ne:`${i}core/pls`,Oe:`${i}core/story`,xe:`${i}core/fallbackstory`,Le:`${i}core/pl`},be:{Re:`${o}ps`,De:`${o}sr`,Ue:`${o}sv`,$e:`${o}st`,Me:`${o}mv`,Ve:`${o}mq`,Fe:`${o}mc`},Ee:{Ge:{je:`${this.Be(c)}connatix.playspace.css`,qe:`${this.He(c)}{{cssFilePath}}`}}},this.ye={Se:{...n},Pe:{Je:`${a}rtb/g`,Ye:`${a}core/atam`,We:`${a}core/mny`,Ke:`${a}core/ms`},be:{Xe:`${u}ai`,ze:`${u}abt`,Qe:`${u}av`,Ze:`${u}aq`,et:`${u}ac`,tt:`${u}ao`,nt:`${u}sab`,it:`${u}ha`,rt:`${u}aucinfo`,st:`${u}sir`,ot:`${u}pm`,ct:`${u}ppm`},Ee:{ke:{lt:`${l}p/plugins/adobe.plugin-compressed.js`,ut:`${l}p/plugins/prebid9.44.0-1.js`,dt:`${l}p/plugins/prebid9.44.0-fandom.js`,ht:`${l}p/plugins/cnx.bridge-1.0.9-compressed.html`,_t:`${l}p/plugins/connatix.omsdk.session.client-1.4.13-compressed.js`,ft:`${l}p/plugins/connatix.omsdk.service-web-1.4.13-compressed.js`,gt:`${l}p/plugins/cnx.display.bridge-1.0.5-compressed.html`,vt:`${l}a/omid.verification.client.1.4.13.js`}}}}Be(t){return`${t}p/${Ht.version}/`}He(t){return`${t}a/`}}function Qt(t,e){if(!t)return null;const n=e||location.search,s=t.replace(/\[/,"\\[").replace(/]/,"\\]"),r=new RegExp(`[\\?&]${s}=([^&#]*)`,"i").exec(n);return r?decodeURIComponent(r[1]):null}class Zt{static get Tt(){if(!Gt(this.yt))throw new Error("bundleDomain missing");return this.yt}static get wt(){return this.It}static get bt(){return null===this.Et?Zt.kt:this.Et}static get St(){return null===Zt.Pt&&(Zt.Pt=Zt.Ct()),Zt.Pt}static set Tt(t){this.yt=t}static set wt(t){this.It=t}static At(t){this.Et=t,Zt.Pt=Zt.Ct()}static Nt(t,e,n){const s=`capi${n}.${t}`,r=t===zt,i=r?`tr${n}.${t}`:`${s}`;return{Ot:`${e?"//img.stg.":"//img."}${t}/`,Ie:`https://${s}/`,xt:`https://${r?i:s}/metrics/`,Lt:`https://pl.${t}/`,be:`https://${i}/tr/`,Rt:`${e?"//vid.stg.":"//vid."}${t}/`,Dt:`//ins.${t}/`,Ee:`//cds${n}.${t}/`,Ut:`//mi.${t}/`}}static $t(t,e){const n=`capi${e}.${Xt}`;return{Mt:`${t?"//vid.stg.":"//vid."}${Xt}/`,Ot:`${t?"//img.stg.":"//img."}${Xt}/`,Ie:`https://${n}/`,xt:`https://${n}/metrics/`,Lt:`https://pl.${Xt}/`,be:`https://${n}/tr/`,ke:`//cds.${Xt}/`,Vt:`//lit.${Xt}/`}}static Ft(t){return{Ie:`https://${`capi${t}.${Xt}`}/`,ke:`https://cds.${Xt}/`}}static Gt(t,e){let n="";Ht.debugMode&&(n="{{env}}");return{Te:{...Zt.Nt(t,e,n)},ye:{...Zt.$t(e,n)},we:{...Zt.Ft(n)}}}static jt(t){Object.keys(t).forEach((e=>{t[e]=t[e].replace("{{env}}",Ht.domainPrefix)}))}static Ct(){let t=!1;if(Ht.debugMode){const n=Qt(Wt.le,jt(window).topFrame.location.href),s=Qt(Wt.j,jt(window).topFrame.location.href);t=("true"===(e=s)||"false"!==e&&void 0)&&!!n,n&&(Ht.domainPrefix=`-${n}`)}var e;const n=this.Gt(this.Tt,t);return Ht.debugMode&&(Zt.jt(n.Te),Zt.jt(n.ye),Zt.jt(n.we)),new Kt(n)}}function te(t){const e=Math.floor(100*Math.random());let n=0,s=0;for(let r=0;r<t.length;r++)if(s+=t[r],e<s){n=r;break}return n}Zt.kt=2,Zt.Et=null,Zt.It="",Zt.Pt=null;const ee="architecture",ne="bitness",se="model",re="platformVersion",ie="fullVersionList";function oe(t){return void 0!==t}class ce{constructor(){}static getInstance(){return this.Bt||(this.Bt=new ce),this.Bt}async fetch(){return oe(this.qt)?this.qt:window?.navigator?.userAgentData?.getHighEntropyValues?(this.qt=await this.Ht(),this.qt):null}async Ht(){return oe(this.Jt)||(this.Jt=new Promise((t=>{window.navigator.userAgentData.getHighEntropyValues([ie,re,ee,ne,se]).then((e=>t(e))).catch((()=>t(null)))}))),this.Jt}}function ae(t){return Array.isArray(t)&&t.length>0}const ue=3e4;async function le(t,e){let n=null;t.shouldSetClientHintsHeaders&&(n=await ce.getInstance().fetch());const s=function({requestUrl:t,requestType:e="POST",contentType:n="",responseType:s="",withCredentials:r=!1,timeout:i=ue,shouldSetClientHintsHeaders:o},c=null){const a=new XMLHttpRequest;if(a.open(e,t,!0),o&&c){const{model:t,platformVersion:e,architecture:n,bitness:s,fullVersionList:r}=c;Gt(e)&&a.setRequestHeader("X-Sec-CH-UA-Platform-Version",e),Gt(n)&&a.setRequestHeader("X-Sec-CH-UA-Arch",n),Gt(s)&&a.setRequestHeader("X-Sec-CH-UA-Bitness",s),Gt(t)&&a.setRequestHeader("X-Sec-CH-UA-Model",t),ae(r)&&a.setRequestHeader("X-Sec-CH-UA-Full-Version-List",r.map((t=>`"${t.brand}";v="${t.version}"`)).join(", "))}n.length>0&&a.setRequestHeader("Content-Type",n);s.length>0&&(a.responseType=s);return a.timeout=i,a.withCredentials=r,a}(t,n),r=new Date;return new Promise(((n,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)n(s.response);else{let e="",n="";try{e=s.responseText}catch(t){}t.shouldSetContentTypeResponseHeader&&"function"==typeof s.getResponseHeader&&s.getAllResponseHeaders()?.includes("content-type")&&(n=`, contentType:${s.getResponseHeader("content-type")}`),i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${e}, contentType:${n}`))}},s.ontimeout=()=>{const t=(new Date).getTime()-r.getTime();i(new Error(`Request timeout status:${s.status}. time:${t}`))},s.send(e)}))}let he=window.location&&window.location.href;try{he=window.top.location.href}catch(t){}const de=500,fe={Yt:30,Wt:!0,Kt:0,Xt:0,zt:!1};function pe(t){return!("true"===Qt(Wt.B,t))}function me(t,e={}){const{Qt:n,Zt:s,en:r,tn:i,nn:o,rn:c,sn:a,on:u,an:l,cn:h,ln:d,un:f,dn:p}=t,m={message:n,level:s,...r&&{callStack:r},...i&&{exception:i},...o&&{sessionId:o},...c&&{extra:c},...a&&{pageUrl:a},...u&&{requestUrl:u},...l&&{requestData:l},...h&&{adsContentRatio:h},...d&&{customConfig:d},...f&&{durationLogs:f},...p&&{invalidVpaidLogs:p}};e={...fe,...e};const g=pe(m.pageUrl||he);if(!(g&&e.Kt>0)||function(t){const e=Math.min(Math.max(t,0),100);return!!te([100-e,e])}(e.Kt))if(m.sessionId,m.sessionId=m.sessionId||Yt.sessionId,m.logSource="identity",qt&&g&&(Yt.incrementLogCount(m.message),Yt.isMaxLogOverflow(m.message)&&me({Qt:"Logging_max_log_overflow_1000",tn:m.message,en:m.callStack,Zt:Vt.u,nn:m.sessionId},{Wt:!1,Yt:100,Xt:100,zt:!1}),Yt.isMaxLog(m.message,e.Yt)))e.Wt&&!Yt.isMaxLogSent(m.message)&&(Yt.setMaxLogSent(m.message),me({Qt:"Logging_max_log_sent",tn:m.message,en:m.callStack,Zt:Vt.h,nn:Yt.sessionId}));else{if(void 0===m.callStack){const t=new Error(m.message);m.callStack=t.stack}if(m.callStack=m.callStack.substring(0,de),Ht.logToServer){m.pageUrl=m.pageUrl||he,m.version=Ht.version;const t=e.zt?Zt.St.ye.Se.Lt:Zt.St.Te.Se.Lt;m.ddsource="browser",m.service="player",m.ua=navigator.userAgent,e.hn?function(t,e){const n=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon(e,n)}(m,t):le({requestUrl:t,requestType:"POST",withCredentials:!1},JSON.stringify(m)).catch((()=>{}))}!Ht.logToConsole&&pe||function(t){let e;switch(t.level){case Vt.h:e="#8B0000";break;case Vt._:e="#FF8C00";break;case Vt.p:e="60"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${e}`)}(m)}}function ge(t,e={}){me(t,{...e,zt:!0})}function _e(t,e){const n=new URL(t),s=new URLSearchParams(n.search),r={};return ae(e)?e.forEach((t=>{const e=s.get(t);r[t]=e})):s.forEach(((t,e)=>{r[e]=t})),r}const we="gdpr",ve="gdpr_consent",ye="us_privacy",be="gpp",Se="gpp_sid",Ce="pageUrl",Ae="publisherExclusionLevel",Ee="callback",Ie="cid",xe="et";function ke(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Pe=ke((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),Te=function(t,e){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Te(t,e)};function $e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Te(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Ne(t,e,n,s){var r,i=arguments.length,o=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof identity_Reflect&&"function"==typeof identity_Reflect.decorate)o=identity_Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function Oe(t,e){if("object"==typeof identity_Reflect&&"function"==typeof identity_Reflect.metadata)return identity_Reflect.metadata(t,e)}Object.create;function Le(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var s,r,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function Re(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)!s&&r in e||(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function De(t){return"function"==typeof t}var Ve=ke((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function je(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.mn=null,this._n=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,s,r;if(!this.closed){this.closed=!0;var i=this.mn;if(i)if(this.mn=null,Array.isArray(i))try{for(var o=Le(i),c=o.next();!c.done;c=o.next()){c.value.remove(this)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else i.remove(this);var a=this.initialTeardown;if(De(a))try{a()}catch(t){r=t instanceof Ve?t.errors:[t]}var u=this._n;if(u){this._n=null;try{for(var l=Le(u),h=l.next();!h.done;h=l.next()){var d=h.value;try{Ge(d)}catch(t){r=null!=r?r:[],t instanceof Ve?r=Re(Re([],Ue(r)),Ue(t.errors)):r.push(t)}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}}if(r)throw new Ve(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Ge(e);else{if(e instanceof t){if(e.closed||e.pn(this))return;e.fn(this)}(this._n=null!==(n=this._n)&&void 0!==n?n:[]).push(e)}},t.prototype.pn=function(t){var e=this.mn;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype.fn=function(t){var e=this.mn;this.mn=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype.gn=function(t){var e=this.mn;e===t?this.mn=null:Array.isArray(e)&&je(e,t)},t.prototype.remove=function(e){var n=this._n;n&&je(n,e),e instanceof t&&e.gn(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),Fe=Me.EMPTY;function Be(t){return t instanceof Me||t&&"closed"in t&&De(t.remove)&&De(t.add)&&De(t.unsubscribe)}function Ge(t){De(t)?t():t.unsubscribe()}var Je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qe={setTimeout:function(t,e){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var r=qe.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,Re([t,e],Ue(n))):setTimeout.apply(void 0,Re([t,e],Ue(n)))},clearTimeout:function(t){var e=qe.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function He(){}var We=Ye("C",void 0,void 0);function Ye(t,e,n){return{kind:t,value:e,error:n}}var Xe=null;function ze(t){if(Je.useDeprecatedSynchronousErrorHandling){var e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),t(),e){var n=Xe,s=n.errorThrown,r=n.error;if(Xe=null,s)throw r}}else t()}var Ke=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Be(e)&&e.add(n)):n.destination=rn,n}return $e(e,t),e.create=function(t,e,n){return new en(t,e,n)},e.prototype.next=function(t){this.isStopped?sn(function(t){return Ye("N",t,void 0)}(t),this):this.vn(t)},e.prototype.error=function(t){this.isStopped?sn(Ye("E",void 0,t),this):(this.isStopped=!0,this.Tn(t))},e.prototype.complete=function(){this.isStopped?sn(We,this):(this.isStopped=!0,this.yn())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype.vn=function(t){this.destination.next(t)},e.prototype.Tn=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype.yn=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Me),Qe=Function.prototype.bind;function Ze(t,e){return Qe.call(t,e)}var tn=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){nn(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){nn(t)}else nn(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){nn(t)}},t}(),en=function(t){function e(e,n,s){var r,i,o=t.call(this)||this;De(e)||!e?r={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=s?s:void 0}:o&&Je.useDeprecatedNextContext?((i=Object.create(e)).unsubscribe=function(){return o.unsubscribe()},r={next:e.next&&Ze(e.next,i),error:e.error&&Ze(e.error,i),complete:e.complete&&Ze(e.complete,i)}):r=e;return o.destination=new tn(r),o}return $e(e,t),e}(Ke);function nn(t){var e;Je.useDeprecatedSynchronousErrorHandling?(e=t,Je.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=e)):function(t){qe.setTimeout((function(){var e=Je.onUnhandledError;if(!e)throw t;e(t)}))}(t)}function sn(t,e){var n=Je.onStoppedNotification;n&&qe.setTimeout((function(){return n(t,e)}))}var rn={closed:!0,next:He,error:function(t){throw t},complete:He};const on=xt.makeEnum("contracts.core.common.v1.CookieSyncType",[{no:0,name:"SYNC_TYPE_UNSPECIFIED"},{no:1,name:"SCRIPT"},{no:2,name:"IMAGE"},{no:3,name:"IFRAME"}]),cn=xt.makeMessageType("contracts.core.common.v1.DspCookieSync",(()=>[{no:1,name:"gdpr_vendor_id",kind:"scalar",T:5},{no:2,name:"sync_url",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:xt.getEnumType(on)},{no:4,name:"gdpr_vendor_id_list",kind:"scalar",T:5,repeated:!0}])),an=xt.makeMessageType("contracts.core.v1.UserIdentityLight",(()=>[{no:2,name:"local_storage_cnx_id",kind:"scalar",T:9,opt:!0},{no:3,name:"webgl_fingerprint",kind:"scalar",T:9,opt:!0},{no:4,name:"screen_size_and_color_depth",kind:"scalar",T:9,opt:!0}]));function un(t,e,n){const[,s=null]=t.toString().match(/constructor\(([\w, ]+)\)/)||[],r=function(t,e){return null===t?`at position #${e}`:`"${t.split(",")[e].trim()}" at position #${e}`}(s,e);return function(t,e,n="    "){return[t,...e.message.split("\n").map((t=>n+t))].join("\n")}(`Cannot inject the dependency ${r} of "${t.name}" constructor. Reason:`,n)}class ln{constructor(){this.xn=new Map}entries(){return this.xn.entries()}getAll(t){return this.ensure(t),this.xn.get(t)}get(t){this.ensure(t);const e=this.xn.get(t);return e[e.length-1]||null}set(t,e){this.ensure(t),this.xn.get(t).push(e)}setAll(t,e){this.xn.set(t,e)}has(t){return this.ensure(t),this.xn.get(t).length>0}clear(){this.xn.clear()}delete(t){this.xn.delete(t)}ensure(t){this.xn.has(t)||this.xn.set(t,[])}}class hn extends ln{}class dn extends ln{}class fn{constructor(){this.preResolution=new hn,this.postResolution=new dn}}class pn{constructor(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(t){let e,n=!1;return new Proxy({},this.createHandler((()=>(n||(e=t(this.wrap()),n=!0),e))))}createHandler(t){const e={};return this.reflectMethods.forEach((n=>{e[n]=(...e)=>{e[0]=t();return(0,identity_Reflect[n])(...e)}})),e}}function mn(t){return Boolean(t.useClass)}function gn(t){return Boolean(t.useFactory)}function _n(t){return"string"==typeof t||"symbol"==typeof t}function wn(t){return"object"==typeof t&&"token"in t&&"multiple"in t}function vn(t){return"object"==typeof t&&"token"in t&&"transform"in t}function yn(t){return Boolean(t.useToken)}function bn(t){return Object.prototype.hasOwnProperty.call(t,"useValue")}const Sn="injectionTokens",Cn="paramInfos";function An(t){const e=identity_Reflect.getMetadata("design:paramtypes",t)||[],n=identity_Reflect.getOwnMetadata(Sn,t)||{};return Object.keys(n).forEach((t=>{e[Number(t)]=n[t]})),e}class En extends ln{}class In{constructor(){this.scopedResolutions=new Map}}function xn(t){if("object"!=typeof t||null===t)return!1;if(!("dispose"in t))return!1;if("function"!=typeof t.dispose)return!1;return!(t.dispose.length>0)}var kn=(t=>(t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped",t))(kn||{});class Pn{constructor(t){this.parent=t,this.Ln=new En,this.interceptors=new fn,this.disposed=!1,this.disposables=new Set}register(t,e,n={lifecycle:kn.Transient}){let s;if(this.ensureNotDisposed(),s=function(t){return mn(t)||bn(t)||yn(t)||gn(t)}(e)?e:{useClass:e},yn(s)){const e=[t];let n=s;for(;null!=n;){const t=n.useToken;if(e.includes(t))throw new Error(`Token registration cycle detected! ${[...e,t].join(" -> ")}`);e.push(t);const s=this.Ln.get(t);n=s&&yn(s.provider)?s.provider:null}}if((n.lifecycle===kn.Singleton||n.lifecycle===kn.ContainerScoped||n.lifecycle===kn.ResolutionScoped)&&(bn(s)||gn(s)))throw new Error(`Cannot use lifecycle "${kn[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this.Ln.set(t,{provider:s,options:n}),this}registerType(t,e){return this.ensureNotDisposed(),_n(e)?this.register(t,{useToken:e}):this.register(t,{useClass:e})}registerInstance(t,e){return this.ensureNotDisposed(),this.register(t,{useValue:e})}registerSingleton(t,e){if(this.ensureNotDisposed(),_n(t)){if(_n(e))return this.register(t,{useToken:e},{lifecycle:kn.Singleton});if(e)return this.register(t,{useClass:e},{lifecycle:kn.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=t;return e&&!_n(e)&&(n=e),this.register(t,{useClass:n},{lifecycle:kn.Singleton})}resolve(t,e=new In){this.ensureNotDisposed();const n=this.getRegistration(t);if(!n&&_n(t))throw new Error(`Attempted to resolve unregistered dependency token: "${t.toString()}"`);if(this.executePreResolutionInterceptor(t,"Single"),n){const s=this.resolveRegistration(n,e);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof pn}(t)){const n=this.construct(t,e);return this.executePostResolutionInterceptor(t,n,"Single"),n}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(t,e){if(this.interceptors.preResolution.has(t)){const n=[];for(const s of this.interceptors.preResolution.getAll(t))"Once"!==s.options.frequency&&n.push(s),s.callback(t,e);this.interceptors.preResolution.setAll(t,n)}}executePostResolutionInterceptor(t,e,n){if(this.interceptors.postResolution.has(t)){const s=[];for(const r of this.interceptors.postResolution.getAll(t))"Once"!==r.options.frequency&&s.push(r),r.callback(t,e,n);this.interceptors.postResolution.setAll(t,s)}}resolveRegistration(t,e){if(this.ensureNotDisposed(),t.options.lifecycle===kn.ResolutionScoped&&e.scopedResolutions.has(t))return e.scopedResolutions.get(t);const n=t.options.lifecycle===kn.Singleton,s=t.options.lifecycle===kn.ContainerScoped,r=n||s;let i,o=!0;return bn(t.provider)?i=t.provider.useValue:yn(t.provider)?(o=r,i=r?t.instance||(t.instance=this.resolve(t.provider.useToken,e)):this.resolve(t.provider.useToken,e)):mn(t.provider)?(o=r,i=r?t.instance||(t.instance=this.construct(t.provider.useClass,e)):this.construct(t.provider.useClass,e)):gn(t.provider)?i=t.provider.useFactory(this):(o=!1,i=this.construct(t.provider,e)),t.options.lifecycle===kn.ResolutionScoped&&e.scopedResolutions.set(t,i),o&&xn(i)&&this.disposables.add(i),i}resolveAll(t,e=new In){this.ensureNotDisposed();const n=this.getAllRegistrations(t);if(!n&&_n(t))throw new Error(`Attempted to resolve unregistered dependency token: "${t.toString()}"`);if(this.executePreResolutionInterceptor(t,"All"),n){const s=n.map((t=>this.resolveRegistration(t,e)));return this.executePostResolutionInterceptor(t,s,"All"),s}const s=[this.construct(t,e)];return this.executePostResolutionInterceptor(t,s,"All"),s}isRegistered(t,e=!1){return this.ensureNotDisposed(),this.Ln.has(t)||((e&&this.parent?.isRegistered(t,!0))??!1)}reset(){this.ensureNotDisposed(),this.Ln.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}unregisterAll(){this.Ln.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}unregister(t){if(!this.getRegistration(t))throw new Error(`Attempted to delete unregistered dependency token: "${t.toString()}"`);this.Ln.delete(t),this.interceptors.preResolution.delete(t),this.interceptors.postResolution.delete(t)}clearInstances(){this.ensureNotDisposed();for(const[t,e]of this.Ln.entries())this.Ln.setAll(t,e.filter((t=>!bn(t.provider))).map((t=>(t.instance=void 0,t))))}createChildContainer(){this.ensureNotDisposed();const t=new Pn(this);for(const[e,n]of this.Ln.entries())n.some((({options:t})=>t.lifecycle===kn.ContainerScoped))&&t.Ln.setAll(e,n.map((t=>t.options.lifecycle===kn.ContainerScoped?{provider:t.provider,options:t.options}:t)));return t}beforeResolution(t,e,n={frequency:"Always"}){this.interceptors.preResolution.set(t,{callback:e,options:n})}afterResolution(t,e,n={frequency:"Always"}){this.interceptors.postResolution.set(t,{callback:e,options:n})}async dispose(){this.disposed=!0;const t=[];this.disposables.forEach((e=>{const n=e.dispose();n&&t.push(n)})),await Promise.all(t)}getRegistration(t){return this.isRegistered(t)?this.Ln.get(t):this.parent?this.parent.getRegistration(t):null}getAllRegistrations(t){return this.isRegistered(t)?this.Ln.getAll(t):this.parent?this.parent.getAllRegistrations(t):null}construct(t,e){if(t instanceof pn)return t.createProxy((t=>this.resolve(t,e)));const n=(()=>{const n=identity_Reflect.getMetadata(Cn,t);if(!n||0===n.length){if(0===t.length)return new t;throw new Error(`TypeInfo not known for "${t.name}"`)}const s=n.map(this.resolveParams(e,t));return new t(...s)})();return xn(n)&&this.disposables.add(n),n}resolveParams(t,e){return(n,s)=>{try{return wn(n)?vn(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,t),...n.transformArgs):n.multiple?this.resolveAll(n.token):this.resolve(n.token,t):vn(n)?this.resolve(n.transform,t).transform(this.resolve(n.token,t),...n.transformArgs):this.resolve(n,t)}catch(t){throw new Error(un(e,s,t))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}}const Tn=new Pn;function $n(){return function(t){const e=An(t);identity_Reflect.defineMetadata(Cn,e,t)}}if("undefined"==typeof identity_Reflect||!identity_Reflect.getMetadata)throw new Error("tsyringe-neo requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");class Nn{static getInstance(){return this.Rn||(this.Rn=new Nn),this.Rn}static getGlobalContainer(){return this.getInstance().globalContainer}constructor(t=Tn){this.Dn=t}get globalContainer(){return this.Dn}}const On="UserConsent";function Ln(t){return t===Lt.DATA_SHARING_PROFILING_AND_ADDRESABILITY}function Un(t){return Date.now()+864e5*t}var Rn;const Dn="cnx_ci",Vn="cnx_cu",jn="BHJChM5nPwTbK3q0Kn5hdunSZYGuvzF6";let Mn=Rn=class{constructor(){try{this.Br=jt(window).topFrame.localStorage}catch(t){}}get isLocalStorageEnabled(){return Boolean(this.Br)}static Xr(t){return t-Date.parse(new Date(Date.now()).toUTCString())<0}getItem(t){return this.Br?this.Br.getItem(t):null}cacheCnxId(t,e){if(Ln(e))return;if(!Gt(t))return;const n={expiryTimestamp:Un(1),userId:t};this.zr(n,Dn,jn)}getCnxId(t){if(Ln(t))return null;const e=this.Qr(Dn,jn);if(!e)return null;return Rn.Xr(e.expiryTimestamp)?(this.Zr(Dn),null):e.userId}cacheUser(t,e){if(Ln(e))return;const n={expiryTimestamp:Un(1),user:t};this.zr(n,Vn,jn)}zr(t,e,n){if(this.Br)try{const s=function(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}(JSON.stringify(t),n);this.Br.setItem(e,s)}catch(t){}}Qr(t,e){if(!this.Br)return null;try{const n=this.Br.getItem(t);if(!Gt(n))return null;const s=function(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}(n,e);return JSON.parse(s)}catch(t){return null}}Zr(t){this.Br?.removeItem(t)}};Mn=Rn=Ne([function(t){$n()(t),Tn.registerSingleton(t)},Oe("design:paramtypes",[])],Mn);class Fn{constructor(t){this.callbackUrl=null,this.Fs=t,this.callbackUrl=this.Gs()}Gs(){const t=_e(this.Fs.location.href,[Ee]).callback;return Gt(t)?new URL(t):null}}class Bn{constructor(t){this.js=new Fn(t)}fetch(){return this.js.callbackUrl}}const Gn=xt.makeMessageType("contracts.core.us.v1.UserSyncStoreLightRequest",(()=>[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"demand_partner_id",kind:"scalar",T:5,opt:!0},{no:3,name:"demand_partner_user_id",kind:"scalar",T:9,opt:!0},{no:4,name:"demand_partner",kind:"scalar",T:5,opt:!0}])),Jn=xt.makeMessageType("contracts.core.us.v1.UserSyncStoreResponse",(()=>[{no:1,name:"error_message",kind:"scalar",T:9,opt:!0}]));function qn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}const Hn={di:"Request error",mi:"Request timeout",_i:"Proto decode error"},Wn={pi:200};function Yn(t){return t.toBinary()}function Xn(t,e,n){try{const s=n??(e?new Uint8Array(e):new Uint8Array);return t.fromBinary(s)}catch(t){throw Ft(t)&&(t.message=Hn._i),new Error(Hn._i)}}async function zn({requestUrl:t,requestData:e,protoResponse:n,requestType:s,withCredentials:r,queryParams:i}){const o=new URL(t);var c;qn(i)&&(qn(c=i)&&Object.keys(c).length>0)&&Object.entries(i).forEach((([t,e])=>{if(Gt(t)&&Gt(e))try{const n=encodeURIComponent(t),s=encodeURIComponent(e);o.searchParams.set(n,s)}catch(t){const{message:e}=Jt(t);ge({Qt:"ProtoRequester_query_params_error",tn:e,Zt:Vt._},{Kt:5})}}));const a=await function(t,e,n="POST",s=!1){const r=new XMLHttpRequest,i=e?Yn(e):null,o=Date.now();return r.open(n,t,!0),r.setRequestHeader("Content-Type","multipart/form-data"),r.responseType="arraybuffer",r.timeout=5e3,r.withCredentials=s,new Promise(((t,e)=>{r.onreadystatechange=()=>{r.readyState===XMLHttpRequest.DONE&&(r.status===Wn.pi?t(r.response):e(new Error(`Reason: ${Hn.di} status:${r.status}, readyState:${r.readyState}`)))},r.ontimeout=()=>{const t=Date.now()-o;e(new Error(`Reason ${Hn.mi} status:${r.status}. time:${t}`))},r.send(i)}))}(o.href,e,s,r);return Xn(n,a)}class Kn{constructor(t){this.Bs=t,this._r=null}get userId(){return Gt(this._r)?this._r.split("_")[0]:null}set userId(t){this._r=t}static getInstance(t){const e="cnx_usr_storage",n=jt(t).topFrame;return n[e]||(n[e]=new Kn(n)),n[e]}getScope(){return this.Bs}syncDemandPartner(t){if(!Gt(this.userId))return;const{demandPartner:e,demandPartnerUserId:n}=t,s=new Gn({userId:this.userId,demandPartnerId:parseInt(e,10),demandPartnerUserId:n});zn({requestType:"POST",requestUrl:Zt.St.we.Pe.Ae,protoResponse:new Jn,requestData:s}).then((()=>{})).catch((()=>{console.error("core/us request failed")}))}}const Qn=143;var Zn="function"==typeof Symbol&&Symbol.observable||"@@observable";function ts(t){return t}function es(t){return 0===t.length?ts:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var ns=function(){function t(t){t&&(this.wn=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var s,r=this,i=(s=t)&&s instanceof Ke||function(t){return t&&De(t.next)&&De(t.error)&&De(t.complete)}(s)&&Be(s)?t:new en(t,e,n);return ze((function(){var t=r,e=t.operator,n=t.source;i.add(e?e.call(i,n):n?r.wn(i):r.In(i))})),i},t.prototype.In=function(t){try{return this.wn(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ss(e))((function(e,s){var r=new en({next:function(e){try{t(e)}catch(t){s(t),r.unsubscribe()}},error:s,complete:e});n.subscribe(r)}))},t.prototype.wn=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[Zn]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return es(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ss(t))((function(t,n){var s;e.subscribe((function(t){return s=t}),(function(t){return n(t)}),(function(){return t(s)}))}))},t.create=function(e){return new t(e)},t}();function ss(t){var e;return null!==(e=null!=t?t:Je.Promise)&&void 0!==e?e:Promise}var rs=ke((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),is=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return $e(e,t),e.prototype.lift=function(t){var e=new os(this,this);return e.operator=t,e},e.prototype.bn=function(){if(this.closed)throw new rs},e.prototype.next=function(t){var e=this;ze((function(){var n,s;if(e.bn(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=Le(e.currentObservers),i=r.next();!i.done;i=r.next()){i.value.next(t)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;ze((function(){if(e.bn(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;ze((function(){if(t.bn(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype.In=function(e){return this.bn(),t.prototype.In.call(this,e)},e.prototype.wn=function(t){return this.bn(),this.En(t),this.kn(t)},e.prototype.kn=function(t){var e=this,n=this,s=n.hasError,r=n.isStopped,i=n.observers;return s||r?Fe:(this.currentObservers=null,i.push(t),new Me((function(){e.currentObservers=null,je(i,t)})))},e.prototype.En=function(t){var e=this,n=e.hasError,s=e.thrownError,r=e.isStopped;n?t.error(s):r&&t.complete()},e.prototype.asObservable=function(){var t=new ns;return t.source=this,t},e.create=function(t,e){return new os(t,e)},e}(ns),os=function(t){function e(e,n){var s=t.call(this)||this;return s.destination=e,s.source=n,s}return $e(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype.wn=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:Fe},e}(is),cs={now:function(){return(cs.delegate||Date).now()},delegate:void 0},as=function(t){function e(e,n,s){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===s&&(s=cs);var r=t.call(this)||this;return r.Sn=e,r.Pn=n,r.Cn=s,r.An=[],r.Nn=!0,r.Nn=n===1/0,r.Sn=Math.max(1,e),r.Pn=Math.max(1,n),r}return $e(e,t),e.prototype.next=function(e){var n=this,s=n.isStopped,r=n.An,i=n.Nn,o=n.Cn,c=n.Pn;s||(r.push(e),!i&&r.push(o.now()+c)),this.On(),t.prototype.next.call(this,e)},e.prototype.wn=function(t){this.bn(),this.On();for(var e=this.kn(t),n=this.Nn,s=this.An.slice(),r=0;r<s.length&&!t.closed;r+=n?1:2)t.next(s[r]);return this.En(t),e},e.prototype.On=function(){var t=this,e=t.Sn,n=t.Cn,s=t.An,r=t.Nn,i=(r?1:2)*e;if(e<1/0&&i<s.length&&s.splice(0,s.length-i),!r){for(var o=n.now(),c=0,a=1;a<s.length&&s[a]<=o;a+=2)c=a;c&&s.splice(0,c+1)}},e}(is);const us={ccpaSubdivisions:Object.values({California:5332921,Virginia:6254928,Connecticut:4831725,Colorado:5417618,Utah:5549030,Florida:4155751,Texas:4736286,Oregon:5744337}),country:{US:6252001}},ls="143",hs=["1YNY","1YNN"],ds="Y";class fs{constructor(t){this.qs=!0,this.Hs="",this.Js=!0,this.Ys=!1,this.Ws=[],this.Bs=t}get Ks(){return this.qs}get Xs(){return this.Js}get zs(){return this.Qs}get Zs(){return this.Hs}get eo(){return this.io}get ro(){if(Gt(this._r))return this._r.split("_")[0]}set Ks(t){this.qs=t}set Xs(t){this.Js=t}set zs(t){this.Qs=t}set Zs(t){this.Hs=t}set eo(t){this.io=t}set ro(t){this._r=t}static so(t){const e="cnx_player_usr_storage",n=jt(t).topFrame;return n[e]||(n[e]=new fs(n)),n[e]}oo(){return this.Bs}registerPlsCall(t){return this.Ys?(this.Ws.push(t),()=>{}):this.ro?(t(),()=>{}):(this.Ys=!0,t(),()=>{this.Ys=!1,this.Ws.forEach((t=>t())),this.Ws=[]})}}function ps(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}const ms=0,gs=1,_s={[ms]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[gs]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class ws{constructor(t,e){this.ao=ms,this.co={},this.uo=null,this.do=t=>new Promise(((e,n)=>{try{const n="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof n&&n.__cmpReturn)if(n.__cmpReturn.callId===this.ho){const t=n.__cmpReturn.returnValue&&n.__cmpReturn.returnValue.vendorConsents;this.mo(t).then((()=>e(this.ho)))}else if(n.__cmpReturn.callId===this._o){const t=n.__cmpReturn.returnValue&&n.__cmpReturn.returnValue.consentData;this.po(t).then((()=>e(this._o)))}}catch(t){n()}})),this.fo=t,this.vo=e}To(){return null!==this.fo||null!==this.vo}yo(){return null!==this.fo?new Promise(((t,e)=>{this.wo(this.fo).then((()=>t())).catch((t=>e(t)))})):null!==this.vo?this.Io(this.vo):Promise.reject()}bo(t){return!!this.co[t]}Eo(){return this.uo}ko(t){this.mo(t),this.po(t.consentString)}So(){return this.bo(ls)}Po(t){return!0}Co(){const{windowPropertyName:t}=_s[ms];return this.fo[t]}Io(t){this._o=ps(),this.ho=ps();const e={};return new Promise((n=>{const s=t=>{this.do(t).then((t=>{e[t]=!0,e[this._o]&&e[this.ho]&&(window.removeEventListener("message",s,!1),n())})).catch((t=>{}))};window.addEventListener("message",s,!1);const{getVendorConsentDataMethodName:r,getConsentDataMethodName:i}=_s[ms];t.postMessage({__cmpCall:{command:r,parameter:null,callId:this.ho}},"*"),t.postMessage({__cmpCall:{command:i,parameter:null,callId:this._o}},"*")}))}wo(t){const{windowPropertyName:e,getConsentDataMethodName:n,getVendorConsentDataMethodName:s}=_s[ms];if(t&&t[e]){const r=new Promise((n=>{t[e](s,null,((t,e)=>{if(e){const{vendorConsents:e}=t;this.mo(e).then((()=>n()))}}))})),i=new Promise((s=>{t[e](n,null,((t,e)=>{if(e){const{consentData:e}=t;this.po(e).then((()=>s()))}}))}));return Promise.all([r,i])}return Promise.reject()}mo(t){return qn(t)?(this.co=t,Promise.resolve()):Promise.reject()}po(t){return Bt(t)?(this.uo=t,Promise.resolve()):Promise.reject()}}var vs,ys,bs,Ss,Cs=n(8462);class As extends Error{constructor(t){super(t),this.name="EncodingError"}}class Es extends Error{constructor(t){super(t),this.name="DecodingError"}}class Is{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(t){if(!/^[0-1]+$/.test(t))throw new As("Invalid bitField");const e=t.length%this.LCM;t+=e?"0".repeat(this.LCM-e):"";let n="";for(let e=0;e<t.length;e+=this.BASIS)n+=this.DICT[parseInt(t.substr(e,this.BASIS),2)];return n}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new Es("Invalidly encoded Base64URL string");let e="";for(let n=0;n<t.length;n++){const s=this.REVERSE_DICT.get(t[n]).toString(2);e+="0".repeat(this.BASIS-s.length)+s}return e}}class xs{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(t){return xs.langSet.has(t)}forEach(t){xs.langSet.forEach(t)}get size(){return xs.langSet.size}}class ks{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class Ps{clone(){const t=new this.constructor;return Object.keys(this).forEach((e=>{const n=this.deepClone(this[e]);void 0!==n&&(t[e]=n)})),t}deepClone(t){const e=typeof t;if("number"===e||"string"===e||"boolean"===e)return t;if(null!==t&&"object"===e){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){const e=[];for(const n of t)e.push(this.deepClone(n));return t instanceof Array?e:new t.constructor(e)}{const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=this.deepClone(t[n]));return e}}}}class Ts extends Error{constructor(t,e,n=""){super(`invalid value ${e} passed for ${t} ${n}`),this.name="TCModelError"}}!function(t){t[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"}(vs||(vs={}));class $s extends Ps{static hashSeparator="-";Ao;restrictionType;constructor(t,e){super(),void 0!==t&&(this.purposeId=t),void 0!==e&&(this.restrictionType=e)}static unHash(t){const e=t.split(this.hashSeparator),n=new $s;if(2!==e.length)throw new Ts("hash",t);return n.purposeId=parseInt(e[0],10),n.restrictionType=parseInt(e[1],10),n}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${$s.hashSeparator}${this.restrictionType}`}get purposeId(){return this.Ao}set purposeId(t){this.Ao=t}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===vs.NOT_ALLOWED||this.restrictionType===vs.REQUIRE_CONSENT||this.restrictionType===vs.REQUIRE_LI)}isSameAs(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType}}class Ns extends Ps{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(t){const e={value:t,left:null,right:null};let n;if(this.isEmpty())this.root=e;else for(n=this.root;;)if(t<n.value){if(null===n.left){n.left=e;break}n=n.left}else{if(!(t>n.value))break;if(null===n.right){n.right=e;break}n=n.right}}get(){const t=[];let e=this.root;for(;e;)if(e.left){let n=e.left;for(;n.right&&n.right!=e;)n=n.right;n.right==e?(n.right=null,t.push(e.value),e=e.right):(n.right=e,e=e.left)}else t.push(e.value),e=e.right;return t}contains(t){let e=!1,n=this.root;for(;n;){if(n.value===t){e=!0;break}t>n.value?n=n.right:t<n.value&&(n=n.left)}return e}min(t=this.root){let e;for(;t;)t.left?t=t.left:(e=t.value,t=null);return e}max(t=this.root){let e;for(;t;)t.right?t=t.right:(e=t.value,t=null);return e}remove(t,e=this.root){let n=null,s="left";for(;e;)if(t<e.value)n=e,e=e.left,s="left";else if(t>e.value)n=e,e=e.right,s="right";else{if(e.left||e.right)if(e.left)if(e.right){const t=this.min(e.right);this.remove(t,e.right),e.value=t}else n?n[s]=e.left:this.root=e.left;else n?n[s]=e.right:this.root=e.right;else n?n[s]=null:this.root=null;e=null}}static build(t){if(t&&0!==t.length){if(1===t.length){const e=new Ns;return e.add(t[0]),e}{const e=t.length>>1,n=new Ns;n.add(t[e]);const s=n.getRoot();if(s){if(e+1<t.length){const n=Ns.build(t.slice(e+1));s.right=n?n.getRoot():null}if(e-1>0){const n=Ns.build(t.slice(0,e-1));s.left=n?n.getRoot():null}}return n}}return null}}class Os extends Ps{bitLength=0;map=new Map;No;has(t){return this.map.has(t)}isOkToHave(t,e,n){let s=!0;if(this.gvl?.vendors){const r=this.gvl.vendors[n];if(r)if(t===vs.NOT_ALLOWED)s=r.legIntPurposes.includes(e)||r.purposes.includes(e);else if(r.flexiblePurposes.length)switch(t){case vs.REQUIRE_CONSENT:s=r.flexiblePurposes.includes(e)&&r.legIntPurposes.includes(e);break;case vs.REQUIRE_LI:s=r.flexiblePurposes.includes(e)&&r.purposes.includes(e)}else s=!1;else s=!1}return s}add(t,e){if(this.isOkToHave(e.restrictionType,e.purposeId,t)){const n=e.hash;this.has(n)||(this.map.set(n,new Ns),this.bitLength=0),this.map.get(n).add(t)}}restrictPurposeToLegalBasis(t){const e=this.gvl.vendorIds,n=t.hash,s=function(){let t;for(t of e);return t}(),r=[...Array(s).keys()].map((t=>t+1));for(let t=1;t<=s;t++)this.has(n)||(this.map.set(n,Ns.build(r)),this.bitLength=0),this.map.get(n).add(t)}getVendors(t){let e=[];if(t){const n=t.hash;this.has(n)&&(e=this.map.get(n).get())}else{const t=new Set;this.map.forEach((e=>{e.get().forEach((e=>{t.add(e)}))})),e=Array.from(t)}return e}getRestrictionType(t,e){let n;return this.getRestrictions(t).forEach((t=>{t.purposeId===e&&(void 0===n||n>t.restrictionType)&&(n=t.restrictionType)})),n}vendorHasRestriction(t,e){let n=!1;const s=this.getRestrictions(t);for(let t=0;t<s.length&&!n;t++)n=e.isSameAs(s[t]);return n}getMaxVendorId(){let t=0;return this.map.forEach((e=>{t=Math.max(e.max(),t)})),t}getRestrictions(t){const e=[];return this.map.forEach(((n,s)=>{t?n.contains(t)&&e.push($s.unHash(s)):e.push($s.unHash(s))})),e}getPurposes(){const t=new Set;return this.map.forEach(((e,n)=>{t.add($s.unHash(n).purposeId)})),Array.from(t)}remove(t,e){const n=e.hash,s=this.map.get(n);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(n),this.bitLength=0))}set gvl(t){this.No||(this.No=t,this.map.forEach(((t,e)=>{const n=$s.unHash(e);t.get().forEach((e=>{this.isOkToHave(n.restrictionType,n.purposeId,e)||t.remove(e)}))})))}get gvl(){return this.No}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(t){t.COOKIE="cookie",t.WEB="web",t.APP="app"}(ys||(ys={})),function(t){t.CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"}(bs||(bs={}));class Ls{static ID_TO_KEY=[bs.CORE,bs.VENDORS_DISCLOSED,bs.VENDORS_ALLOWED,bs.PUBLISHER_TC];static KEY_TO_ID={[bs.CORE]:0,[bs.VENDORS_DISCLOSED]:1,[bs.VENDORS_ALLOWED]:2,[bs.PUBLISHER_TC]:3}}class Us extends Ps{bitLength=0;Oo=0;xo=new Set;*[Symbol.iterator](){for(let t=1;t<=this.maxId;t++)yield[t,this.has(t)]}values(){return this.xo.values()}get maxId(){return this.Oo}has(t){return this.xo.has(t)}unset(t){Array.isArray(t)?t.forEach((t=>this.unset(t))):"object"==typeof t?this.unset(Object.keys(t).map((t=>Number(t)))):(this.xo.delete(Number(t)),this.bitLength=0,t===this.maxId&&(this.Oo=0,this.xo.forEach((t=>{this.Oo=Math.max(this.maxId,t)}))))}isIntMap(t){let e="object"==typeof t;return e=e&&Object.keys(t).every((e=>{let n=Number.isInteger(parseInt(e,10));return n=n&&this.isValidNumber(t[e].id),n=n&&void 0!==t[e].name,n})),e}isValidNumber(t){return parseInt(t,10)>0}isSet(t){let e=!1;return t instanceof Set&&(e=Array.from(t).every(this.isValidNumber)),e}set(t){if(Array.isArray(t))t.forEach((t=>this.set(t)));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((t=>Number(t))));else{if(!this.isValidNumber(t))throw new Ts("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.xo.add(t),this.Oo=Math.max(this.maxId,t),this.bitLength=0}}empty(){this.xo=new Set}forEach(t){for(let e=1;e<=this.maxId;e++)t(this.has(e),e)}get size(){return this.xo.size}setAll(t){this.set(t)}}class Rs{static[ks.cmpId]=12;static[ks.cmpVersion]=12;static[ks.consentLanguage]=12;static[ks.consentScreen]=6;static[ks.created]=36;static[ks.isServiceSpecific]=1;static[ks.lastUpdated]=36;static[ks.policyVersion]=6;static[ks.publisherCountryCode]=12;static[ks.publisherLegitimateInterests]=24;static[ks.publisherConsents]=24;static[ks.purposeConsents]=24;static[ks.purposeLegitimateInterests]=24;static[ks.purposeOneTreatment]=1;static[ks.specialFeatureOptins]=12;static[ks.useNonStandardStacks]=1;static[ks.vendorListVersion]=12;static[ks.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class Ds{static encode(t){return String(Number(t))}static decode(t){return"1"===t}}class Vs{static encode(t,e){let n;if("string"==typeof t&&(t=parseInt(t,10)),n=t.toString(2),n.length>e||t<0)throw new As(`${t} too large to encode into ${e}`);return n.length<e&&(n="0".repeat(e-n.length)+n),n}static decode(t,e){if(e!==t.length)throw new Es("invalid bit length");return parseInt(t,2)}}class js{static encode(t,e){return Vs.encode(Math.round(t.getTime()/100),e)}static decode(t,e){if(e!==t.length)throw new Es("invalid bit length");const n=new Date;return n.setTime(100*Vs.decode(t,e)),n}}class Ms{static encode(t,e){let n="";for(let s=1;s<=e;s++)n+=Ds.encode(t.has(s));return n}static decode(t,e){if(t.length!==e)throw new Es("bitfield encoding length mismatch");const n=new Us;for(let s=1;s<=e;s++)Ds.decode(t[s-1])&&n.set(s);return n.bitLength=t.length,n}}class Fs{static encode(t,e){const n=(t=t.toUpperCase()).charCodeAt(0)-65,s=t.charCodeAt(1)-65;if(n<0||n>25||s<0||s>25)throw new As(`invalid language code: ${t}`);if(e%2==1)throw new As(`numBits must be even, ${e} is not valid`);e/=2;return Vs.encode(n,e)+Vs.encode(s,e)}static decode(t,e){let n;if(e!==t.length||t.length%2)throw new Es("invalid bit length for language");{const e=65,s=t.length/2,r=Vs.decode(t.slice(0,s),s)+e,i=Vs.decode(t.slice(s),s)+e;n=String.fromCharCode(r)+String.fromCharCode(i)}return n}}class Bs{static encode(t){let e=Vs.encode(t.numRestrictions,Rs.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((n=>{e+=Vs.encode(n.purposeId,Rs.purposeId),e+=Vs.encode(n.restrictionType,Rs.restrictionType);const s=t.getVendors(n),r=s.length;let i=0,o=0,c="";for(let e=0;e<r;e++){const n=s[e];0===o&&(i++,o=n);const a=s[r-1],u=t.gvl.vendorIds,l=t=>{for(;++t<=a&&!u.has(t););return t};if(e===r-1||s[e+1]>l(n)){const t=!(n===o);c+=Ds.encode(t),c+=Vs.encode(o,Rs.vendorId),t&&(c+=Vs.encode(n,Rs.vendorId)),o=0}}e+=Vs.encode(i,Rs.numEntries),e+=c})),e}static decode(t){let e=0;const n=new Os,s=Vs.decode(t.substr(e,Rs.numRestrictions),Rs.numRestrictions);e+=Rs.numRestrictions;for(let r=0;r<s;r++){const s=Vs.decode(t.substr(e,Rs.purposeId),Rs.purposeId);e+=Rs.purposeId;const r=Vs.decode(t.substr(e,Rs.restrictionType),Rs.restrictionType);e+=Rs.restrictionType;const i=new $s(s,r),o=Vs.decode(t.substr(e,Rs.numEntries),Rs.numEntries);e+=Rs.numEntries;for(let s=0;s<o;s++){const s=Ds.decode(t.substr(e,Rs.anyBoolean));e+=Rs.anyBoolean;const r=Vs.decode(t.substr(e,Rs.vendorId),Rs.vendorId);if(e+=Rs.vendorId,s){const s=Vs.decode(t.substr(e,Rs.vendorId),Rs.vendorId);if(e+=Rs.vendorId,s<r)throw new Es(`Invalid RangeEntry: endVendorId ${s} is less than ${r}`);for(let t=r;t<=s;t++)n.add(t,i)}else n.add(r,i)}}return n.bitLength=e,n}}!function(t){t[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"}(Ss||(Ss={}));class Gs{static encode(t){const e=[];let n,s=[],r=Vs.encode(t.maxId,Rs.maxId),i="";const o=Rs.maxId+Rs.encodingType,c=o+t.maxId,a=2*Rs.vendorId+Rs.singleOrRange+Rs.numEntries;let u=o+Rs.numEntries;return t.forEach(((r,o)=>{if(i+=Ds.encode(r),n=t.maxId>a&&u<c,n&&r){t.has(o+1)?0===s.length&&(s.push(o),u+=Rs.singleOrRange,u+=Rs.vendorId):(s.push(o),u+=Rs.vendorId,e.push(s),s=[])}})),n?(r+=String(Ss.RANGE),r+=this.buildRangeEncoding(e)):(r+=String(Ss.FIELD),r+=i),r}static decode(t,e){let n,s=0;const r=Vs.decode(t.substr(s,Rs.maxId),Rs.maxId);s+=Rs.maxId;const i=Vs.decode(t.charAt(s),Rs.encodingType);if(s+=Rs.encodingType,i===Ss.RANGE){if(n=new Us,1===e){if("1"===t.substr(s,1))throw new Es("Unable to decode default consent=1");s++}const r=Vs.decode(t.substr(s,Rs.numEntries),Rs.numEntries);s+=Rs.numEntries;for(let e=0;e<r;e++){const e=Ds.decode(t.charAt(s));s+=Rs.singleOrRange;const r=Vs.decode(t.substr(s,Rs.vendorId),Rs.vendorId);if(s+=Rs.vendorId,e){const e=Vs.decode(t.substr(s,Rs.vendorId),Rs.vendorId);s+=Rs.vendorId;for(let t=r;t<=e;t++)n.set(t)}else n.set(r)}}else{const e=t.substr(s,r);s+=r,n=Ms.decode(e,r)}return n.bitLength=s,n}static buildRangeEncoding(t){const e=t.length;let n=Vs.encode(e,Rs.numEntries);return t.forEach((t=>{const e=1===t.length;n+=Ds.encode(!e),n+=Vs.encode(t[0],Rs.vendorId),e||(n+=Vs.encode(t[1],Rs.vendorId))})),n}}function Js(){return{[ks.version]:Vs,[ks.created]:js,[ks.lastUpdated]:js,[ks.cmpId]:Vs,[ks.cmpVersion]:Vs,[ks.consentScreen]:Vs,[ks.consentLanguage]:Fs,[ks.vendorListVersion]:Vs,[ks.policyVersion]:Vs,[ks.isServiceSpecific]:Ds,[ks.useNonStandardStacks]:Ds,[ks.specialFeatureOptins]:Ms,[ks.purposeConsents]:Ms,[ks.purposeLegitimateInterests]:Ms,[ks.purposeOneTreatment]:Ds,[ks.publisherCountryCode]:Fs,[ks.vendorConsents]:Gs,[ks.vendorLegitimateInterests]:Gs,[ks.publisherRestrictions]:Bs,segmentType:Vs,[ks.vendorsDisclosed]:Gs,[ks.vendorsAllowed]:Gs,[ks.publisherConsents]:Ms,[ks.publisherLegitimateInterests]:Ms,[ks.numCustomPurposes]:Vs,[ks.publisherCustomConsents]:Ms,[ks.publisherCustomLegitimateInterests]:Ms}}class qs{1={[bs.CORE]:[ks.version,ks.created,ks.lastUpdated,ks.cmpId,ks.cmpVersion,ks.consentScreen,ks.consentLanguage,ks.vendorListVersion,ks.purposeConsents,ks.vendorConsents]};2={[bs.CORE]:[ks.version,ks.created,ks.lastUpdated,ks.cmpId,ks.cmpVersion,ks.consentScreen,ks.consentLanguage,ks.vendorListVersion,ks.policyVersion,ks.isServiceSpecific,ks.useNonStandardStacks,ks.specialFeatureOptins,ks.purposeConsents,ks.purposeLegitimateInterests,ks.purposeOneTreatment,ks.publisherCountryCode,ks.vendorConsents,ks.vendorLegitimateInterests,ks.publisherRestrictions],[bs.PUBLISHER_TC]:[ks.publisherConsents,ks.publisherLegitimateInterests,ks.numCustomPurposes,ks.publisherCustomConsents,ks.publisherCustomLegitimateInterests],[bs.VENDORS_ALLOWED]:[ks.vendorsAllowed],[bs.VENDORS_DISCLOSED]:[ks.vendorsDisclosed]}}class Hs{1=[bs.CORE];2=[bs.CORE];constructor(t,e){if(2===t.version)if(t.isServiceSpecific)this[2].push(bs.PUBLISHER_TC);else{const n=!(!e||!e.isForVendors);n&&!0!==t[ks.supportOOB]||this[2].push(bs.VENDORS_DISCLOSED),n&&(t[ks.supportOOB]&&t[ks.vendorsAllowed].size>0&&this[2].push(bs.VENDORS_ALLOWED),this[2].push(bs.PUBLISHER_TC))}}}class Ws{static fieldSequence=new qs;static encode(t,e){let n;try{n=this.fieldSequence[String(t.version)][e]}catch(n){throw new As(`Unable to encode version: ${t.version}, segment: ${e}`)}let s="";e!==bs.CORE&&(s=Vs.encode(Ls.KEY_TO_ID[e],Rs.segmentType));const r=Js();return n.forEach((n=>{const i=t[n],o=r[n];let c=Rs[n];void 0===c&&this.isPublisherCustom(n)&&(c=Number(t[ks.numCustomPurposes]));try{s+=o.encode(i,c)}catch(t){throw new As(`Error encoding ${e}->${n}: ${t.message}`)}})),Is.encode(s)}static decode(t,e,n){const s=Is.decode(t);let r=0;n===bs.CORE&&(e.version=Vs.decode(s.substr(r,Rs[ks.version]),Rs[ks.version])),n!==bs.CORE&&(r+=Rs.segmentType);const i=this.fieldSequence[String(e.version)][n],o=Js();return i.forEach((t=>{const n=o[t];let i=Rs[t];if(void 0===i&&this.isPublisherCustom(t)&&(i=Number(e[ks.numCustomPurposes])),0!==i){const o=s.substr(r,i);if(e[t]=n===Gs?n.decode(o,e.version):n.decode(o,i),Number.isInteger(i))r+=i;else{if(!Number.isInteger(e[t].bitLength))throw new Es(t);r+=e[t].bitLength}}})),e}static isPublisherCustom(t){return 0===t.indexOf("publisherCustom")}}class Ys{static processor=[t=>t,(t,e)=>{t.publisherRestrictions.gvl=e,t.purposeLegitimateInterests.unset(1);const n=new Map;return n.set("legIntPurposes",t.vendorLegitimateInterests),n.set("purposes",t.vendorConsents),n.forEach(((n,s)=>{n.forEach(((r,i)=>{if(r){const r=e.vendors[i];if(!r||r.deletedDate)n.unset(i);else if(0===r[s].length)if("legIntPurposes"===s&&0===r.purposes.length&&0===r.legIntPurposes.length&&r.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===r.flexiblePurposes.length)n.unset(i);else{const e=t.publisherRestrictions.getRestrictions(i);let r=!1;for(let t=0,n=e.length;t<n&&!r;t++)r=e[t].restrictionType===vs.REQUIRE_CONSENT&&"purposes"===s||e[t].restrictionType===vs.REQUIRE_LI&&"legIntPurposes"===s;r||n.unset(i)}else n.unset(i)}}))})),t.vendorsDisclosed.set(e.vendors),t}];static process(t,e){const n=t.gvl;if(!n)throw new As("Unable to encode TCModel without a GVL");if(!n.isReady)throw new As("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=n.language.toUpperCase(),e?.version>0&&e?.version<=this.processor.length?t.version=e.version:t.version=this.processor.length;const s=t.version-1;if(!this.processor[s])throw new As(`Invalid version: ${t.version}`);return this.processor[s](t,n)}}class Xs extends Error{constructor(t){super(t),this.name="GVLError"}}class zs{static absCall(t,e,n,s){return new Promise(((r,i)=>{const o=new XMLHttpRequest;o.withCredentials=n,o.addEventListener("load",(()=>{if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){let t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}r(t)}else i(new Error(`HTTP Status: ${o.status} response type: ${o.responseType}`))})),o.addEventListener("error",(()=>{i(new Error("error"))})),o.addEventListener("abort",(()=>{i(new Error("aborted"))})),null===e?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=s,o.ontimeout=()=>{i(new Error("Timeout "+s+"ms "+t))},o.send(e)}))}static post(t,e,n=!1,s=0){return this.absCall(t,JSON.stringify(e),n,s)}static fetch(t,e=!1,n=0){return this.absCall(t,null,e,n)}}class Ks extends Ps{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new xs;static Lo;static set baseUrl(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new Xs("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.Lo=t}static get baseUrl(){return this.Lo}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;Ro=!1;Do;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;Uo;isLatest=!1;constructor(t){super();let e=Ks.baseUrl;if(this.Uo=Ks.DEFAULT_LANGUAGE,this.isVendorList(t))this.populate(t),this.readyPromise=Promise.resolve();else{if(!e)throw new Xs("must specify GVL.baseUrl before loading GVL json");if(t>0){const n=t;Ks.CACHE.has(n)?(this.populate(Ks.CACHE.get(n)),this.readyPromise=Promise.resolve()):(e+=Ks.versionedFilename.replace("[VERSION]",String(n)),this.readyPromise=this.fetchJson(e))}else Ks.CACHE.has(Ks.LATEST_CACHE_KEY)?(this.populate(Ks.CACHE.get(Ks.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(e+Ks.latestFilename))}}static emptyLanguageCache(t){let e=!1;return void 0===t&&Ks.LANGUAGE_CACHE.size>0?(Ks.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(Ks.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e}static emptyCache(t){let e=!1;return Number.isInteger(t)&&t>=0?(Ks.CACHE.delete(t),e=!0):void 0===t&&(Ks.CACHE=new Map,e=!0),e}cacheLanguage(){Ks.LANGUAGE_CACHE.has(this.Uo)||Ks.LANGUAGE_CACHE.set(this.Uo,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(t){try{this.populate(await zs.fetch(t))}catch(t){throw new Xs(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(t){const e=t.toUpperCase();if(!Ks.consentLanguages.has(e))throw new Xs(`unsupported language ${t}`);if(e!==this.Uo)if(this.Uo=e,Ks.LANGUAGE_CACHE.has(e)){const t=Ks.LANGUAGE_CACHE.get(e);for(const e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}else{const e=Ks.baseUrl+Ks.languageFilename.replace("[LANG]",t);try{await this.fetchJson(e),this.cacheLanguage()}catch(t){throw new Xs("unable to load language: "+t.message)}}}get language(){return this.Uo}isVendorList(t){return void 0!==t&&void 0!==t.vendors}populate(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.Do=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.Ro=!0,this.isLatest&&Ks.CACHE.set(Ks.LATEST_CACHE_KEY,this.getJson()),Ks.CACHE.has(this.vendorListVersion)||Ks.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(t){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((t=>{this.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((t=>{this.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((t=>{this.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((t=>+t))),this.vendorIds=new Set(t),this.Do=t.reduce(((t,e)=>{const n=this.Do[String(e)];return n&&void 0===n.deletedDate&&(n.purposes.forEach((t=>{this.byPurposeVendorMap[String(t)].consent.add(e)})),n.specialPurposes.forEach((t=>{this.bySpecialPurposeVendorMap[String(t)].add(e)})),n.legIntPurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].legInt.add(e)})),n.flexiblePurposes&&n.flexiblePurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].flexible.add(e)})),n.features.forEach((t=>{this.byFeatureVendorMap[String(t)].add(e)})),n.specialFeatures.forEach((t=>{this.bySpecialFeatureVendorMap[String(t)].add(e)})),t[e]=n),t}),{})}getFilteredVendors(t,e,n,s){const r=t.charAt(0).toUpperCase()+t.slice(1);let i;const o={};return i="purpose"===t&&n?this["by"+r+"VendorMap"][String(e)][n]:this["by"+(s?"Special":"")+r+"VendorMap"][String(e)],i.forEach((t=>{o[String(t)]=this.vendors[String(t)]})),o}getVendorsWithConsentPurpose(t){return this.getFilteredVendors("purpose",t,"consent")}getVendorsWithLegIntPurpose(t){return this.getFilteredVendors("purpose",t,"legInt")}getVendorsWithFlexiblePurpose(t){return this.getFilteredVendors("purpose",t,"flexible")}getVendorsWithSpecialPurpose(t){return this.getFilteredVendors("purpose",t,void 0,!0)}getVendorsWithFeature(t){return this.getFilteredVendors("feature",t)}getVendorsWithSpecialFeature(t){return this.getFilteredVendors("feature",t,void 0,!0)}get vendors(){return this.Do}narrowVendorsTo(t){this.mapVendors(t)}get isReady(){return this.Ro}clone(){const t=new Ks(this.getJson());return this.Uo!==Ks.DEFAULT_LANGUAGE&&t.changeLanguage(this.Uo),t}static isInstanceOf(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo}}class Qs extends Ps{static consentLanguages=Ks.consentLanguages;$o=!1;Mo=!0;Vo=!1;Fo=!1;Go="AA";jo=2;Bo=0;qo=2;Ho="EN";Jo=0;Yo=0;Wo=0;Ko=0;No;created;lastUpdated;specialFeatureOptins=new Us;purposeConsents=new Us;purposeLegitimateInterests=new Us;publisherConsents=new Us;publisherLegitimateInterests=new Us;publisherCustomConsents=new Us;publisherCustomLegitimateInterests=new Us;customPurposes;vendorConsents=new Us;vendorLegitimateInterests=new Us;vendorsDisclosed=new Us;vendorsAllowed=new Us;publisherRestrictions=new Os;constructor(t){super(),t&&(this.gvl=t),this.updated()}set gvl(t){Ks.isInstanceOf(t)||(t=new Ks(t)),this.No=t,this.publisherRestrictions.gvl=t}get gvl(){return this.No}set cmpId(t){if(t=Number(t),!(Number.isInteger(t)&&t>1))throw new Ts("cmpId",t);this.Jo=t}get cmpId(){return this.Jo}set cmpVersion(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new Ts("cmpVersion",t);this.Yo=t}get cmpVersion(){return this.Yo}set consentScreen(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new Ts("consentScreen",t);this.Bo=t}get consentScreen(){return this.Bo}set consentLanguage(t){this.Ho=t}get consentLanguage(){return this.Ho}set publisherCountryCode(t){if(!/^([A-z]){2}$/.test(t))throw new Ts("publisherCountryCode",t);this.Go=t.toUpperCase()}get publisherCountryCode(){return this.Go}set vendorListVersion(t){if((t=Number(t)>>0)<0)throw new Ts("vendorListVersion",t);this.Wo=t}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.Wo}set policyVersion(t){if(this.qo=parseInt(t,10),this.qo<0)throw new Ts("policyVersion",t)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.qo}set version(t){this.jo=parseInt(t,10)}get version(){return this.jo}set isServiceSpecific(t){this.$o=t}get isServiceSpecific(){return this.$o}set useNonStandardStacks(t){this.Vo=t}get useNonStandardStacks(){return this.Vo}set supportOOB(t){this.Mo=t}get supportOOB(){return this.Mo}set purposeOneTreatment(t){this.Fo=t}get purposeOneTreatment(){return this.Fo}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let t=this.Ko;if("object"==typeof this.customPurposes){const e=Object.keys(this.customPurposes).sort(((t,e)=>Number(t)-Number(e)));t=parseInt(e.pop(),10)}return t}set numCustomPurposes(t){if(this.Ko=parseInt(t,10),this.Ko<0)throw new Ts("numCustomPurposes",t)}updated(){const t=new Date,e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));this.created=e,this.lastUpdated=e}}class Zs{static encode(t,e){let n,s="";return t=Ys.process(t,e),n=Array.isArray(e?.segments)?e.segments:new Hs(t,e)[""+t.version],n.forEach(((e,r)=>{let i="";r<n.length-1&&(i="."),s+=Ws.encode(t,e)+i})),s}static decode(t,e){const n=t.split("."),s=n.length;e||(e=new Qs);for(let t=0;t<s;t++){const s=n[t],r=Is.decode(s.charAt(0)).substr(0,Rs.segmentType),i=Ls.ID_TO_KEY[Vs.decode(r,Rs.segmentType).toString()];Ws.decode(s,e,i)}return e}}const tr=(t,e)=>{const{windowPropertyName:n}=_s[e];return function(t,e){const n=jt(t).topFrame;return n[e]?n:null}(t,n)},er=(t,e)=>{const{framePropertyName:n}=_s[e];return function(t,e){let n=t,s=null;try{for(;!s;){try{n.frames[e]&&(s=n)}catch(t){}if(!t.top||t.top===n)break;n=n.parent}}catch(t){}return s}(t,n)},nr=(t,e)=>null!==tr(t,e)||null!==er(t,e),sr=t=>{const e=Zs.decode(t),n={},s={},r=e.cmpId;return e.vendorConsents.forEach(((t,e)=>{n[e]=t})),e.purposeConsents.forEach(((t,e)=>{s[e]=t})),{vendorConsents:n,purposeConsents:s,tcString:t,cmpId:r}},rr=t=>{const e=Cs.decodeConsentString(t);let n="";const s=e.maxVendorId;for(let t=1;t<=s;t++)n+="0";const r=[...n];e.allowedVendorIds.forEach((t=>{r[t-1]="1"}));return(t=>{const e={consentString:t};for(let n=0;n<t.length;n++)e[n+1]="1"===t[n];return e})(r.join(""))},ir=(t,e,n)=>{let s;try{s=e(t)}catch{}if(qn(s))return s;try{s=n(t)}catch{}return s},or=t=>Gt(t?.tcString),cr=t=>Gt(t?.consentString),ar=({cmpEncodedString:t,tcfEncodedString:e})=>{if(!Gt(t)&&!Gt(e))return null;let n=null;return Gt(e)&&(n=ir(e,sr,rr)),qn(n)?n:Gt(t)?(n=ir(t,rr,sr),qn(n)?n:(ge({Qt:"UserManagerService_getDecodedConsentData",tn:"cmpEncodedString failed to decode",en:JSON.stringify({cmpEncodedString:t,tcfEncodedString:e}),Zt:Vt.h}),null)):(ge({Qt:"UserManagerService_getDecodedConsentData",tn:"tcfEncodedString failed to decode",en:JSON.stringify({tcfEncodedString:e}),Zt:Vt.h}),null)};class ur{constructor(t,e,n){this.ao=gs,this.Xo=t=>new Promise(((e,n)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.__tcfapiReturn&&s.__tcfapiReturn.callId===this.zo){const t=s.__tcfapiReturn.returnValue.tcString;this.mo(t).then((()=>e(this.zo))).catch((t=>n()))}}catch(t){n()}})),this.Qo=t,this.Zo=e,this.ea=n}To(){return null!==this.Qo||null!==this.Zo}yo(){return null!==this.Qo?new Promise(((t,e)=>{this.wo(this.Qo).then((()=>t())).catch((t=>e(t)))})):null!==this.Zo?this.Io(this.Zo):Promise.reject()}bo(t){return!!this.ta?.vendorConsents&&!!this.ta?.vendorConsents[t]}Eo(){const t=this.ta?.tcString;return Gt(t)?t:null}ko(t){this.na(t.cmpId)&&(this.ta={...this.ta,...t})}So(){return!0}Po(t){return!!this.ta?.purposeConsents&&t.every((t=>!!this.ta.purposeConsents[t]))}Co(){const{windowPropertyName:t}=_s[gs];return this.Qo[t]}na(t){const e=this.ea.includes(parseInt(t.toString(),10));return e||ge({tn:`CMP with Id ${t} not in GCL`,Qt:"TcfApi_CMP_Id_not_in_Global_CMP_List",Zt:Vt.p},{Kt:5}),e}Io(t){this.zo=ps();const e={};return new Promise((n=>{const s=t=>{this.Xo(t).then((t=>{e[t]=!0,e[this.zo]&&(window.removeEventListener("message",s,!1),n())})).catch((t=>{}))};window.addEventListener("message",s,!1);const{getVendorConsentDataMethodName:r}=_s[gs];t.postMessage({__tcfapiCall:{command:r,parameter:null,callId:this.zo}},"*")}))}wo(t){const{windowPropertyName:e,consentUpdateMethodName:n,removeUpdateListenerMethodName:s}=_s[gs];return t&&t[e]?new Promise(((t,r)=>{this.Qo[e](n,2,((n,i)=>{if(i&&("useractioncomplete"===n.eventStatus||"tcloaded"===n.eventStatus)){const i=n.tcString;this.mo(i).then((()=>t())).catch((()=>r())),this.Qo[e](s,2,(()=>{}),n.listenerId)}}))})):Promise.reject()}mo(t){const e=ar({tcfEncodedString:t});return or(e)&&this.na(e.cmpId)?(this.ta=e,Promise.resolve()):Promise.reject()}}const lr=[1,2,4,7,8];class hr{constructor(t,e,n={}){this.ia=null,this.ra=t,this.Un=e,this._appSettings=n;const s=ar({cmpEncodedString:n.cmp?.consentString,tcfEncodedString:n.tcf?.tcString}),r=this.sa(s);null!==r?(this.oa(r),(or(s)||cr(s))&&this.aa.ko(s)):ge({Qt:"UserManagerService_UserConsentApiManager",tn:"failed to find the right api, no consent string and no framework on page was found",en:JSON.stringify({appSettings:n}),Zt:Vt.h})}ca(t){this.Dr=t}la(t){if(!this.da())return;const e=t.consentMetadata?.consentStringType,n=t.encodeConsentString||t.consentMetadata?.additionalConsent;let s;if(!Gt(n))return void ge({Zt:Vt.p,Qt:"AMP_no_consent_string_provided",en:JSON.stringify(t),tn:this.Dr});if(e===t.consentStringTypeEnum.US_PRIVACY_STRING)return void ge({Qt:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",Zt:Vt._,en:n,tn:`${JSON.stringify(t)}__pageURL_${this.Dr}`},{Yt:2,Wt:!1});const r=ar({tcfEncodedString:n,cmpEncodedString:n});or(r)?s=new ur(null,null,this._appSettings.cmpIds):cr(r)&&(s=new ws(null,null)),s||e===t.consentStringTypeEnum.GLOBAL_PRIVACY_PLATFORM?s?(this.aa=s,this.aa.ko(r)):ge({Qt:"UserConsentApiManager_amp_userConsentApi_not_found",Zt:Vt._,en:n,tn:`${JSON.stringify(t)}__pageURL__${this.Dr}`},{Wt:!1,Yt:2}):ge({Qt:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp_and_not_gpp",Zt:Vt._,en:n,tn:`${JSON.stringify(t)}__pageURL__${this.Dr}`},{Yt:2,Wt:!1})}da(){return this.ra}ha(t,e=[]){return!this.da()||this.aa.bo(t)&&this.aa.Po(e)}ma(){return this.ha(ls,lr)}_a(){return this.pa()!==ms&&this.aa.Po(lr)}fa(){return this.aa.Eo()}ga(){return this.aa.To()?this.aa.yo():new Promise((t=>{this.ia=setInterval((()=>{const{apiWindow:e,apiLocatorFrame:n}=this.va(this.aa.ao);(e||n)&&(clearInterval(this.ia),this.oa(this.aa.ao),t(this.aa.yo()))}),1e3)}))}Ta(){return this.aa.Co()}ya(){return this.aa.To()}wa(){return this.aa.So()}pa(){return this.aa.ao}Ia(){clearInterval(this.ia)}oa(t){const{apiWindow:e,apiLocatorFrame:n}=this.va(t);this.aa=t===gs?new ur(e,n,this._appSettings.cmpIds):new ws(e,n)}va(t){return{apiWindow:tr(this.Un,t),apiLocatorFrame:er(this.Un,t)}}sa(t){if(or(t))return gs;if(cr(t))return ms;if(nr(this.Un,gs))return gs;return nr(this.Un,ms)?ms:gs}}const dr="NotFound";function fr(t,e){return e.includes(t)}const pr="CCPA Error",mr="CCPA Pending",gr="CCPA Delayed Success",_r="CCPA Delayed Failure";class wr{constructor(t,e){this.ba=1,this.Ea="__uspapi",this.ka="getUSPData",this.Sa={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.Pa=t,this.Ca(e)}Aa(){if(this.Pa.Zs||this.Pa.Ks)return this.Pa.Zs}Ks(){return this.Pa.Ks}Na(){return!this.Pa.Ks||this.Oa()}xa(t){this.La=t}Ra(){return this.Da()&&this.Ua(),this.Ks()?new Promise((t=>{this.Aa()?t():t(this.$a())})):Promise.resolve()}Ma(t){this.Ks()&&this.Va&&(this.Sa.isPending?(ge({Qt:mr,tn:"CCPA_Pending_At_Start_AdRequest",Zt:Vt.p,en:t}),this.Sa.isDelayed=!0,this.Fa=t):this.Sa.isRejected&&ge({Qt:pr,tn:"CCPA_Error_At_Start_AdRequest",Zt:Vt.p,en:t}))}$a(){return this.Sa.promise=new Promise(((t,e)=>{const n=this.Pa.oo()[this.Ea];n?(this.Va=!0,n(this.ka,this.ba,((n,s)=>{s?(this.Ca(n.uspString),t()):e(dr)}))):e(dr)})),this.Ga(this.Sa),this.Sa.promise}Oa(){return!this.Pa.Zs||fr(this.Pa.Zs,hs)}ja(t){this.Pa.Zs=t}Ca(t){let e=t;window.navigator.globalPrivacyControl&&(t?this.Oa()&&(e=function(t,e){return t?.slice(0,2)+e+t.slice(3)}(t,ds)):e="1-Y-"),this.ja(e)}Da(){if(!te([95,5]))return!1;return function(t,e){const n=Date.now();return!(n<t||n>e)}(new Date(2020,10,16,12,0,0).getTime(),new Date(2020,10,17,12,0,0).getTime())}Ua(){const{countryGeoId:t,subdivisionId:e}=this.La;t===us.country.US&&ge({Qt:"UserCcpaManager_logCCPA",Zt:Vt.p,en:JSON.stringify(e),tn:this.Pa.Zs})}Ga(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&ge({Qt:gr,tn:"CCPA_Success_After_Delay",Zt:Vt.p,en:this.Fa})})).catch((e=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&ge({Qt:_r,tn:"CCPA_Failed_After_Delay",Zt:Vt.p,en:this.Fa}),e})).catch((t=>{}))}}const vr="listenerRegistered",yr="sectionChange";function br(t,e=5,n){return new Promise(((s,r)=>{t().then(s).catch((i=>{1===e||"function"==typeof n&&n(i)?r(i):br(t,e-1,n).then(s,r)}))}))}function Sr(t){if(!t)return;return t.match(/\d+/g).map((function(t){return parseInt(t,10)}))}class Cr{constructor(t,e){this.Ba=null,this.Pa=t,this.qa(e?.gppString),this.Ha(Sr(e?.gppSid))}Ja(){if(this.Pa.Xs)return this.Pa.eo}Ya(){if(this.Pa.Xs)return this.Pa.zs}Xs(){return this.Pa.Xs}async Wa(){this.Xs()&&!this.Ja()&&await this.Ka()}la(t){if(!this.Xs())return;const e=t.consentMetadata?.consentStringType,n=t.encodeConsentString||t.consentMetadata?.additionalConsent;e===t?.consentStringTypeEnum?.GLOBAL_PRIVACY_PLATFORM&&(this.Ha(Sr(t.consentMetadata?.gppSectionId)),this.qa(n))}Ia(){const t=this.Xa();t&&this.Ba&&(t("removeEventListener",null,this.Ba),this.Ba=null)}async Ka(){return br((()=>new Promise(((t,e)=>{const n=this.Xa();n&&(n("ping",(e=>{this.Ja()||ge({Zt:Vt.p,Qt:"GPP_API Found on page",en:JSON.stringify(e)},{Kt:5}),"ready"===e.signalStatus&&(this.qa(e.gppString),this.Ha(e.applicableSections),t())})),this.Ba||n("addEventListener",(t=>this.za(t)))),setTimeout((()=>e(Error(dr))),1e3)}))),7)}za(t){switch(t.eventName){case vr:this.Ba=t.listenerId;break;case yr:this.qa(`${t.pingData?.gppString}`)}}qa(t){this.Pa.eo=t}Ha(t){this.Pa.zs=t}Xa(){return this.Pa.oo().__gpp}}const Ar="1---";function Er(t){return Gt(t)&&t!==Ar}class Ir{constructor(t,e,n,s){switch(this.Qa=new as,this.ki={isCcpaApplicable:!0,isGdprApplicable:!0,gdprConsent:null,usPrivacy:null,gppString:null,gppSid:null},this.Fs=t,this.Za=s,oe(s)&&(this.ki.isGdprApplicable=s),this.ec=fs.so(window),e){case Ot.IDENTITY_SCRIPT:{const t=!!oe(this.Za)&&this.Za;this.tc=new hr(t,window,{cmpIds:n}),this.nc=new wr(this.ec),this.ic=new Cr(this.ec),this.tc.ga().then((()=>{const t=this.tc?.da()??!1,e=this.tc?.fa()||null,n=t&&Gt(e)?e:null;this.updateUserConsent({...this.ki,isGdprApplicable:t,gdprConsent:n})}));break}case Ot.STANDALONE:this.updateUserConsent(this.rc())}}get userConsent(){return this.ki}get onConsentGiven(){return this.Qa.asObservable()}updateUserConsent(t){if(t)return this.ki={...t},void this.sc();if(!this.nc||!this.ic||!this.tc)return void ge({Qt:"UserConsentService_updateUserConsent_undefined_managers",Zt:Vt.p},{Kt:1});const e=this.tc.da(),n=this.tc.fa(),s=e&&Gt(n)?n:null,r=this.nc.Ks(),i=this.nc.Aa(),o=r&&Gt(i)?i:null,c=this.ic.Ja()||null,a=this.ic.Ya()?.toString()||null;this.ki={isCcpaApplicable:r,isGdprApplicable:e,gdprConsent:s,usPrivacy:o,gppString:c,gppSid:a},this.sc()}setGeoLocation(t){this.nc&&this.ic?(this.oc(t),this.nc.xa(t),this.nc.Ra().then((()=>{this.updateUserConsent()})).catch((t=>{const{message:e}=Jt(t);e!==dr&&ge({Qt:"UserConsentService_ccpa_fetchString",Zt:Vt.p,tn:e},{Kt:1})})),this.ic.Wa().then((()=>{this.updateUserConsent()})).catch((t=>{const{message:e}=Jt(t);e!==dr&&ge({Qt:"UserConsentService_gpp_fetchString",Zt:Vt.p,tn:e},{Kt:1})}))):ge({Qt:"UserConsentService_setGeoLocation_undefined_managers",Zt:Vt.p},{Kt:1})}isConsentForVendor(t){return this.ac()&&this.cc(t)}isConsentForConnatix(){return this.isConsentForVendor(Qn)}isConsentForVendorAndConnatix(t){return this.isConsentForVendor(t)&&this.isConsentForConnatix()}isGdprApplicable(){return this.ki.isGdprApplicable}isCcpaApplicable(){return this.ki.isCcpaApplicable}ac(){return function(t){const e=Er(t);return!e||e&&("1YNN"===t||"1YNY"===t)}(this.ki.usPrivacy)}cc(t){const{isGdprApplicable:e,gdprConsent:n}=this.ki;return function(t,e,n){const s=Gt(e);let r=!1;try{r=!t||t&&s&&Zs.decode(e).vendorConsents.has(n)}catch{}return r}(e,n,t)}sc(){this.isConsentForVendor(Qn)&&(this.Qa.next(),this.Qa.complete())}rc(){const t=_e(this.Fs.location.href,[we,ve,ye,be,Se]);return{isCcpaApplicable:Er(t.us_privacy),isGdprApplicable:"1"===t.gdpr,gdprConsent:t.gdpr_consent,usPrivacy:t.us_privacy,gppString:t.gpp,gppSid:t.gpp_sid}}oc(t){fr(t.subdivisionId,us.ccpaSubdivisions)?this.ec.Ks=!0:this.ec.Ks=!1,this.ec.Xs=this.ec.Ks||Boolean(this.Za)}}class xr{constructor(t,e,n,s){this.lc=new Ir(t,e,n,s)}get onConsentGiven(){return this.lc.onConsentGiven}get(){return this.lc.userConsent}isConsentForVendor(t){return this.lc.isConsentForVendor(t)}isConsentForConnatix(){return this.lc.isConsentForVendor(Qn)}isConsentForVendorAndConnatix(t){return this.lc.isConsentForVendorAndConnatix(t)}isGdprApplicable(){return this.lc.isGdprApplicable()}isCcpaApplicable(){return this.lc.isCcpaApplicable()}updateUserConsent(t){this.lc.updateUserConsent(t)}setGeoLocation(t){t?this.lc.setGeoLocation(t):ge({Qt:"UserConsent_geolocation_undefined",Zt:Vt.p},{Kt:1})}}const kr=t=>{t.style.width="1px",t.style.height="1px",t.style.display="none",t.style.border="0",t.style.margin="0",t.style.padding="0"};function Pr(t,e){try{const n=e.document.createElement("script");n.src=t,n.async=!0,n.type="text/javascript",kr(n),n.onload=()=>{},n.onerror=()=>{console.error("Syncing cannot be made with ",t),e.document.head.removeChild(n)},e.document.head.appendChild(n)}catch(e){console.error("Syncing cannot be made with ",t)}}const Tr={[on.SYNC_TYPE_UNSPECIFIED]:Pr,[on.IFRAME]:function(t,e){const n=e.document.createElement("iframe");n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),kr(n),n.src=t,e.document.body.appendChild(n)},[on.IMAGE]:function(t){const e=new Image;kr(e),e.src=t},[on.SCRIPT]:Pr};class $r{constructor(t){this.uc=t}sync(t,e){(0,Tr[t])(e,this.uc)}}const Nr=xt.makeMessageType("contracts.core.sync_light.v1.UserIdentificationLightRequest",(()=>[{no:1,name:"implementation_type",kind:"enum",T:xt.getEnumType(Ot)},{no:2,name:"is_in_app",kind:"scalar",T:8},{no:3,name:"use_user_score",kind:"enum",T:xt.getEnumType(Ut)},{no:4,name:"device_id",kind:"scalar",T:9,opt:!0},{no:5,name:"publisher_exclusion_level",kind:"enum",T:xt.getEnumType(Lt)},{no:7,name:"client_ab0",kind:"scalar",T:5,opt:!0},{no:8,name:"client_ab1",kind:"scalar",T:5,opt:!0},{no:9,name:"client_ab2",kind:"scalar",T:5,opt:!0},{no:10,name:"client_ab3",kind:"scalar",T:5,opt:!0},{no:11,name:"client_ab4",kind:"scalar",T:5,opt:!0},{no:12,name:"client_ab5",kind:"scalar",T:5,opt:!0},{no:13,name:"user_identity",kind:"message",T:an},{no:14,name:"page_url",kind:"scalar",T:9,opt:!0},{no:15,name:"server_ab0",kind:"scalar",T:5,opt:!0},{no:16,name:"server_ab1",kind:"scalar",T:5,opt:!0},{no:17,name:"player_id",kind:"scalar",T:9,opt:!0},{no:18,name:"server_ab2",kind:"scalar",T:5,opt:!0},{no:19,name:"server_ab3",kind:"scalar",T:5,opt:!0},{no:20,name:"server_ab4",kind:"scalar",T:5,opt:!0},{no:21,name:"server_ab5",kind:"scalar",T:5,opt:!0},{no:22,name:"customer_id",kind:"scalar",T:9,opt:!0},{no:23,name:"sax_event_type",kind:"enum",T:xt.getEnumType(Dt),opt:!0}])),Or=xt.makeMessageType("contracts.core.v1.GeoLocation",(()=>[{no:1,name:"country_geo_id",kind:"scalar",T:5},{no:2,name:"city_id",kind:"scalar",T:5},{no:3,name:"subdivision_id",kind:"scalar",T:5},{no:4,name:"dma_id",kind:"scalar",T:5,opt:!0},{no:5,name:"ip",kind:"scalar",T:9},{no:6,name:"lat",kind:"scalar",T:1,opt:!0},{no:7,name:"lon",kind:"scalar",T:1,opt:!0},{no:8,name:"zip_code",kind:"scalar",T:9}])),Lr=xt.makeEnum("contracts.core.v1.PrimaryHouseholdReason",[{no:0,name:"PRIMARY_HOUSEHOLD_REASON_UNSPECIFIED"},{no:1,name:"MULTIPLE_DEVICE_IDS"},{no:2,name:"MULTIPLE_RECURRENT_OCCURENCES"}]),Ur=xt.makeMessageType("contracts.core.v1.Household",(()=>[{no:1,name:"probabilistic_id",kind:"scalar",T:9},{no:2,name:"household_id",kind:"scalar",T:9},{no:3,name:"is_user_agent_truncated",kind:"scalar",T:8},{no:4,name:"is_primary_household",kind:"scalar",T:8},{no:5,name:"primary_household_reason",kind:"enum",T:xt.getEnumType(Lr)},{no:6,name:"webgl_fingerprint_number",kind:"scalar",T:5,opt:!0},{no:7,name:"local_storage_household_id",kind:"scalar",T:9,opt:!0}])),Rr=xt.makeEnum("contracts.core.v1.DeviceType",[{no:0,name:"DESKTOP"},{no:1,name:"SMARTPHONE"},{no:2,name:"TABLET"},{no:3,name:"GAME_CONSOLE"},{no:4,name:"SMARTTV"},{no:5,name:"WEARABLE_COMPUTER"},{no:6,name:"PDA"},{no:7,name:"UNRECOGNIZED"}]),Dr=xt.makeMessageType("contracts.core.v1.Browser",(()=>[{no:1,name:"browser_version",kind:"scalar",T:9},{no:2,name:"browser_type",kind:"scalar",T:9},{no:3,name:"os_code",kind:"scalar",T:9},{no:4,name:"device_type",kind:"enum",T:xt.getEnumType(Rr)}])),Vr=xt.makeMessageType("contracts.core.sync_light.v1.UserIdentificationLightResponse",(()=>[{no:1,name:"error_message",kind:"scalar",T:9,opt:!0},{no:2,name:"geo_location",kind:"message",T:Or,opt:!0},{no:4,name:"user_id",kind:"scalar",T:9,opt:!0},{no:5,name:"tier",kind:"scalar",T:5,opt:!0},{no:6,name:"is_identity_enhanced",kind:"scalar",T:8,opt:!0},{no:7,name:"region",kind:"scalar",T:9,opt:!0},{no:8,name:"max_users_lookup",kind:"scalar",T:5,opt:!0},{no:9,name:"is_user_score_enabled",kind:"scalar",T:8,opt:!0},{no:11,name:"audience_id_list",kind:"scalar",T:9,repeated:!0},{no:12,name:"dsp_cookie_sync_list",kind:"message",T:cn,repeated:!0},{no:15,name:"cookie_id_origin",kind:"enum",T:xt.getEnumType(Rt)},{no:18,name:"household",kind:"message",T:Ur,opt:!0},{no:19,name:"browser",kind:"message",T:Dr,opt:!0}])),jr={ai:"tier",ci:"v",li:"abid",ui:"part"};async function Mr(t,e,n,s,r,i,o,c,a,u=2,l={},h=3){return await br((async()=>{const h=function(t,e,n={}){return{[jr.ai]:`${t}`,...oe(e)&&{[jr.ci]:`${e}`},...oe(n?.abId)&&{[jr.li]:n.abId},...oe(n?.part)&&{[jr.ui]:n.part}}}(u,o,l),{useUserScore:d,deviceId:f,clientAb0:p,clientAb1:m,clientAb2:g,clientAb3:_,clientAb4:w,clientAb5:v}=n,y=new Nr({implementationType:t,isInApp:e,useUserScore:d,deviceId:f,clientAb0:p,clientAb1:m,clientAb2:g,clientAb3:_,clientAb4:w,clientAb5:v,publisherExclusionLevel:s,userIdentity:i,pageUrl:r,playerId:c,saxEventType:a});return await zn({protoResponse:new Vr,requestUrl:Zt.St.we.Pe.Ce,requestData:y,withCredentials:!0,queryParams:h})}),h)}const Fr={dc:"GDPR",hc:"GDPR_CONSENT",mc:"GPP_STRING",_c:"GPP_SID",fc:"USER_ID",gc:"userId",vc:"US_PRIVACY"};function Br(t,e,n){let s=String(t);return s=s.replace(`[${e}]`,`${n}`),s=s.replace(`%5B${e}%5D`,`${n}`),s}function Gr(t,e,n){let s=String(t);return s=function(t,e){let n=Br(t,Fr.gc,e);return n=Br(n,Fr.fc,e),n=n.replace(`%7b${Fr.fc}%7d`,e),n}(t,n),s=function(t,e){const{isGdprApplicable:n,gdprConsent:s}=e,r=Number(n);let i=Br(t,Fr.dc,r);return i=Br(i,Fr.hc,s),i}(s,e),s=function(t,e){const{gppString:n,gppSid:s}=e;let r=Br(t,Fr.mc,n);return r=Br(r,Fr._c,s),r}(s,e),s=function(t,e){const{usPrivacy:n}=e;return Br(t,Fr.vc,n)}(s,e),s}function Jr(t,e,n,s){let r=String(e);r=Gr(r,s,n);return"69"!==t&&(r=function(t,e){const n=new URL(t),{isGdprApplicable:s,gdprConsent:r,usPrivacy:i,gppString:o,gppSid:c}=e;return n.searchParams.has("gdpr")||n.searchParams.set("gdpr",`${Number(s)}`),Gt(r)&&!n.searchParams.has("gdpr_consent")&&n.searchParams.set("gdpr_consent",r),Gt(o)&&!n.searchParams.has("gpp")&&n.searchParams.set("gpp",o),Gt(c)&&!n.searchParams.has("gpp_sid")&&n.searchParams.set("gpp_sid",c),Gt(i)&&!n.searchParams.has("us_privacy")&&n.searchParams.set("us_privacy",i),n.href}(r,s)),r}class qr{constructor(t,e){this.Tc=[],this.uc=t,this.yc=e;const{implementationType:n,tier:s,isEu:r,cmpIds:i}=e;qr.wc(s),this.Ic=Kn.getInstance(this.uc);const o=this.Ic.getScope();this.ki=new xr(o,n,i,r);Nn.getGlobalContainer().register(On,{useValue:this.ki}),this.kc=new Bn(o),this.Sc=new $r(o)}static wc(t){Zt.Tt=Xt,oe(t)&&Zt.At(t)}async init(t={useUserScore:Ut.NO}){if(this.ki.get().isGdprApplicable&&(await function(t,e){var n="object"==typeof e;return new Promise((function(s,r){var i=new en({next:function(t){s(t),i.unsubscribe()},error:r,complete:function(){n?s(e.defaultValue):r(new Pe)}});t.subscribe(i)}))}(this.ki.onConsentGiven),!this.ki.isConsentForConnatix()))return;const{implementationType:e,isInApp:n,playerBundleNumber:s,tier:r,publisherExclusionLevel:i,abSettings:o,pageUrl:c,playerId:a,saxEventType:u}=this.yc,l=(h=Mn,Nn.getGlobalContainer().resolve(h));var h;const d=l.getCnxId(i)||void 0,f=function(){try{const t=document.createElement("canvas");t.width=t.height=128;const e={failIfMajorPerformanceCaveat:!0},n=t.getContext("webgl2",e)||t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("WebGL not supported or major performance caveat");let s="unknown",r="unknown";try{const t=n.getExtension("WEBGL_debug_renderer_info");t&&(s=n.getParameter(t.UNMASKED_VENDOR_WEBGL),r=n.getParameter(t.UNMASKED_RENDERER_WEBGL))}catch(t){}const i=n.getSupportedExtensions()||[],o={maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubeMapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxVertexAttribs:n.getParameter(n.MAX_VERTEX_ATTRIBS),aliasedLineWidthRange:n.getParameter(n.ALIASED_LINE_WIDTH_RANGE),maxRenderbufferSize:n.getParameter(n.MAX_RENDERBUFFER_SIZE)};try{oe(WebGL2RenderingContext)&&n instanceof WebGL2RenderingContext&&Object.assign(o,{max3DTextureSize:n.getParameter(n.MAX_3D_TEXTURE_SIZE),maxSamples:n.getParameter(n.MAX_SAMPLES),maxColorAttachments:n.getParameter(n.MAX_COLOR_ATTACHMENTS)})}catch(t){}return o.fragmentHighFloat=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT),o.vertexHighFloat=n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT),JSON.stringify({vendor:s,renderer:r,extensions:i,params:o})}catch(t){const{message:e}=Jt(t);return void ge({Qt:"UserSync_getWebGLFingerprint_error",tn:e,Zt:Vt.p},{Kt:1,Yt:1,Wt:!1})}}(),p=function(){try{const t=window.screen.width;return`${t}x${window.screen.height}x${window.screen.colorDepth}`}catch(t){return}}(),m=new an({localStorageCnxId:d,screenSizeAndColorDepth:p,webglFingerprint:f}),g=await Mr(e,n,t,i,c,m,s,a,u,r,o);g.tier=g.tier??2,g.isIdentityEnhanced=g.isIdentityEnhanced??false;const{userId:_,geoLocation:w}=g;return e===Ot.IDENTITY_SCRIPT&&this.ki.setGeoLocation(w),Gt(_)&&l.cacheCnxId(_,i),l.cacheUser(g,i),g}updateUserConsent(t){this.ki.updateUserConsent(t)}sync(t){this.Tc.push(this.ki.onConsentGiven.subscribe((()=>{try{this.pr(t)}catch(t){this.Cc(t)}})))}destroy(){!function(t=[]){t.filter((t=>!!t)).forEach((t=>t.unsubscribe()))}(this.Tc)}pr(t){const{userId:e,dspCookieSyncList:n}=t;if(!e)return;if(this.Ic.userId=e,oe(t)){const t=this.kc.fetch();t&&(t.searchParams.set("uid",e),this.Sc.sync(on.IFRAME,t.href))}if(!ae(n))return;const s=this.ki.get();n.filter((t=>this.Ac([t.gdprVendorId,...t.gdprVendorIdList]))).forEach((t=>{const{syncUrl:n,gdprVendorId:r,type:i}=t,o=Jr(r.toString(),n,e,s);this.Sc.sync(i,o)}))}Ac(t){return t.some((t=>this.ki.isConsentForVendor(t)))}Cc(t){Ft(t)?console.log(t.message):console.log("core/sync request failed")}}let Hr,Wr,Yr,Xr,zr=[],Kr="",Qr=Lt.EXCLUSION_LEVEL_UNSPECIFIED,Zr=window;const ti=oe(window.cnxIdentity)?Ot.IDENTITY_SCRIPT:Ot.STANDALONE;switch(ti){case Ot.IDENTITY_SCRIPT:{const t=window;Zr=jt(window).topFrame,Qr=t.cnxIdentity.cnx_data.publisherExclusionLevel,Kr=Mt(jt(window),window),Hr=t.cnxIdentity.cnx_data.eu,zr=t.cnxIdentity.cnx_data.cmpIds,Wr=t.cnxIdentity.cnx_data.tier;break}case Ot.STANDALONE:{const t=_e(window.location.href);Kr=t[Ce]||Mt(jt(window),window),Yr=t[Ie]||"",Xr=Number(t[xe])||Dt.EVENT_TYPE_UNSPECIFIED,Qr=Number(t[Ae])||Lt.EXCLUSION_LEVEL_UNSPECIFIED;break}}const ei=new qr(Zr,{publisherExclusionLevel:Qr,pageUrl:Kr,implementationType:ti,isEu:Hr,cmpIds:zr,tier:Wr,isInApp:!1,customerId:Yr,saxEventType:Xr});ei.init().then((t=>{t&&ei.sync(t)})).catch((t=>{ei.destroy();const{message:e}=Jt(t);ge({Qt:"UserSyncLight_init_failed",Zt:Vt._,tn:e},{Kt:1})}))})()})();